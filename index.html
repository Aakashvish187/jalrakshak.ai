<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JalRakshƒÅ AI - Flood Early Warning System</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :where([class^="ri-"])::before { content: "\f3c2"; }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #06b6d4;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #0891b2;
        }
        
        /* JalRakshƒÅ AI Map Styles */
        .jalraksha-marker {
            background: transparent !important;
            border: none !important;
        }
        
        .jalraksha-marker-content {
            position: relative;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        .jalraksha-marker-content:hover {
            transform: scale(1.2);
            z-index: 1000;
        }
        
        .jalraksha-critical {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: 2px solid #fca5a5;
        }
        
        .jalraksha-high {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: 2px solid #fbbf24;
        }
        
        .jalraksha-medium {
            background: linear-gradient(135deg, #fb923c, #ea580c);
            border: 2px solid #fdba74;
        }
        
        .jalraksha-low {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border: 2px solid #86efac;
        }

        
        .jalraksha-marker-pulse {
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            opacity: 0.6;
            animation: jalraksha-pulse 2s infinite;
        }
        
        .jalraksha-critical .jalraksha-marker-pulse {
            background: #ef4444;
        }
        
        .jalraksha-high .jalraksha-marker-pulse {
            background: #f59e0b;
        }
        
        .jalraksha-medium .jalraksha-marker-pulse {
            background: #fb923c;
        }
        
        .jalraksha-low .jalraksha-marker-pulse {
            background: #22c55e;
        }
        
        @keyframes jalraksha-pulse {
            0% {
                transform: scale(1);
                opacity: 0.6;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.3;
            }
            100% {
                transform: scale(1.4);
                opacity: 0;
            }
        }
        
        /* JalRakshƒÅ AI Popup Styles */
        .jalraksha-popup-container .leaflet-popup-content-wrapper {
            background: #1e293b;
            border: 1px solid #475569;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
        
        .jalraksha-popup-container .leaflet-popup-content {
            margin: 0;
            padding: 0;
        }
        
        .jalraksha-popup {
            padding: 16px;
            color: #f1f5f9;
        }
        
        .jalraksha-popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #475569;
        }
        
        .jalraksha-popup-title {
            font-size: 16px;
            font-weight: 600;
            margin: 0;
            color: #06b6d4;
        }
        
        .jalraksha-popup-risk {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .jalraksha-popup-risk.jalraksha-critical {
            background: #ef4444;
            color: white;
        }
        
        .jalraksha-popup-risk.jalraksha-high {
            background: #f59e0b;
            color: white;
        }
        
        .jalraksha-popup-risk.jalraksha-medium {
            background: #fb923c;
            color: white;
        }
        
        .jalraksha-popup-risk.jalraksha-low {
            background: #22c55e;
            color: white;
        }
        
        .jalraksha-popup-body {
            margin-bottom: 12px;
        }
        
        .jalraksha-popup-body p {
            margin: 6px 0;
            font-size: 14px;
            color: #cbd5e1;
        }
        
        .jalraksha-popup-footer {
            text-align: center;
        }
        
        .jalraksha-popup-btn {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .jalraksha-popup-btn:hover {
            background: linear-gradient(135deg, #0891b2, #0e7490);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#06b6d4',
                        secondary: '#0891b2'
                    },
                    borderRadius: {
                        'none': '0px',
                        'sm': '4px',
                        DEFAULT: '8px',
                        'md': '12px',
                        'lg': '16px',
                        'xl': '20px',
                        '2xl': '24px',
                        '3xl': '32px',
                        'full': '9999px',
                        'button': '8px'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-950 text-white min-h-screen">
    <header class="bg-slate-900/90 backdrop-blur-sm border-b border-primary/30 sticky top-0 z-50">
        <div class="px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="text-2xl">üåä</div>
                    <div>
                        <h1 class="text-2xl font-bold text-primary">JalRakshƒÅ AI</h1>
                        <p class="text-sm text-slate-400">Flood Early Warning & Rescue System</p>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-6">
                    <button id="dashboardBtn" class="text-primary hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-primary after:rounded-full">Dashboard</button>
                    <button id="routeFinderBtn" class="text-slate-300 hover:text-primary transition-colors">Route Finder</button>
                    <button id="riskDashboardBtn" class="text-slate-300 hover:text-primary transition-colors">Risk Dashboard</button>
                    <button id="telegramBotBtn" class="text-slate-300 hover:text-primary transition-colors">Telegram Bot</button>
                    <button id="crowdsourcedBtn" class="text-slate-300 hover:text-primary transition-colors">Reports</button>
                    <button id="rescueTrackingBtn" class="text-slate-300 hover:text-primary transition-colors">Rescue Teams</button>
                    <button id="analyticsBtn" class="text-slate-300 hover:text-primary transition-colors">Analytics</button>
                    <button id="teamsBtn" class="text-slate-300 hover:text-primary transition-colors">Teams</button>
                    <button id="settingsBtn" class="text-slate-300 hover:text-primary transition-colors">Settings</button>
                </div>
                <button class="md:hidden w-8 h-8 flex items-center justify-center">
                    <i class="ri-menu-line text-xl"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="p-6 space-y-6">
        <!-- Dashboard Page -->
        <div id="dashboardPage">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <!-- AI Risk Map -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-xl font-semibold flex items-center">
                                <i class="ri-map-2-line text-primary mr-2"></i>
                                AI Risk Map
                            </h2>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2 text-sm">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <span>Safe</span>
                                </div>
                                <div class="flex items-center space-x-2 text-sm">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <span>Warning</span>
                                </div>
                                <div class="flex items-center space-x-2 text-sm">
                                    <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                                    <span>Critical</span>
                                </div>
                            </div>
                        </div>
                        <div class="relative h-[600px] bg-slate-800 rounded-lg overflow-hidden border border-slate-700">
                            <div id="jalrakshaMap" class="w-full h-full rounded-lg"></div>
                            <div class="absolute bottom-4 right-4 z-[1000]">
                                <div class="bg-red-500/20 border border-red-500 px-3 py-2 rounded-lg animate-pulse backdrop-blur-sm">
                                    <span class="text-red-400 text-sm font-medium">High Risk Zone Detected</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="ri-water-flash-line text-primary mr-2"></i>
                                Water Level Trends
                            </h3>
                            <div id="waterChart" class="h-64"></div>
                        </div>
                        <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="ri-cloudy-2-line text-primary mr-2"></i>
                                Rainfall Forecast
                            </h3>
                            <div id="rainfallChart" class="h-64"></div>
                        </div>
                    </div>

                    <!-- Active Rescue Teams -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-team-line text-primary mr-2"></i>
                            Active Rescue Teams
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-600/30">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium">Team Alpha-1</span>
                                    <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                </div>
                                <p class="text-sm text-slate-400 mb-2">Location: Sector 15, Zone A</p>
                                <p class="text-sm text-slate-400 mb-3">Status: Available</p>
                                <button class="w-full bg-primary/20 text-primary border border-primary/30 px-3 py-2 rounded-button text-sm hover:bg-primary/30 transition-colors">
                                    Assign Mission
                                </button>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-600/30">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium">Team Beta-2</span>
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full animate-pulse"></div>
                                </div>
                                <p class="text-sm text-slate-400 mb-2">Location: Sector 22, Zone B</p>
                                <p class="text-sm text-slate-400 mb-3">Status: In Transit</p>
                                <button class="w-full bg-slate-600/50 text-slate-400 border border-slate-600/30 px-3 py-2 rounded-button text-sm" disabled>
                                    Busy
                                </button>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-600/30">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium">Team Gamma-3</span>
                                    <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                                </div>
                                <p class="text-sm text-slate-400 mb-2">Location: Sector 8, Zone C</p>
                                <p class="text-sm text-slate-400 mb-3">Status: On Mission</p>
                                <button class="w-full bg-red-500/20 text-red-400 border border-red-500/30 px-3 py-2 rounded-button text-sm" disabled>
                                    Active Rescue
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Sidebar -->
                <div class="space-y-6">
                    <!-- AI Alerts -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold flex items-center">
                                <i class="ri-alarm-warning-line text-yellow-500 mr-2"></i>
                                AI Alerts
                            </h3>
                            <div class="w-2 h-2 bg-primary rounded-full animate-pulse"></div>
                        </div>
                        <div class="space-y-3 max-h-80 overflow-y-auto">
                            <div class="bg-red-500/10 border border-red-500/30 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-red-400 text-sm font-medium">CRITICAL</span>
                                    <span class="text-xs text-slate-400">2 min ago</span>
                                </div>
                                <p class="text-sm mb-2">Rapid water rise detected in Riverside District</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-400">AI Confidence: 94%</span>
                                    <i class="ri-error-warning-line text-red-400"></i>
                                </div>
                            </div>
                            <div class="bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-yellow-400 text-sm font-medium">HIGH</span>
                                    <span class="text-xs text-slate-400">5 min ago</span>
                                </div>
                                <p class="text-sm mb-2">Heavy rainfall predicted in Northern Sector</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-400">AI Confidence: 87%</span>
                                    <i class="ri-cloudy-2-line text-yellow-400"></i>
                                </div>
                            </div>
                            <div class="bg-orange-500/10 border border-orange-500/30 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-orange-400 text-sm font-medium">MEDIUM</span>
                                    <span class="text-xs text-slate-400">12 min ago</span>
                                </div>
                                <p class="text-sm mb-2">Drainage system capacity at 75% in Zone B</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-400">AI Confidence: 78%</span>
                                    <i class="ri-water-flash-line text-orange-400"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency SOS -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-alarm-line text-red-500 mr-2"></i>
                            Emergency SOS
                        </h3>
                        <button id="sosButton" class="w-full bg-red-500 hover:bg-red-600 text-white px-6 py-4 rounded-button font-semibold text-lg mb-4 animate-pulse">
                            <i class="ri-alarm-warning-line mr-2"></i>
                            RAISE SOS
                        </button>
                        <div class="space-y-3">
                            <div class="bg-slate-800/50 rounded-lg p-3 border border-slate-600/30">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Medical Emergency</span>
                                    <span class="text-xs text-red-400">URGENT</span>
                                </div>
                                <p class="text-xs text-slate-400 mb-2">Location: Sector 15, Building A-203</p>
                                <p class="text-xs text-slate-400">Assigned: Team Alpha-1 (ETA: 8 min)</p>
                            </div>
                        </div>
                    </div>

                    <!-- AI Insights -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-brain-line text-primary mr-2"></i>
                            AI Insights
                        </h3>
                        <div class="space-y-4">
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Flood Risk Prediction</span>
                                    <span class="text-primary text-sm">Next 24h</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2 mb-2">
                                    <div class="bg-gradient-to-r from-yellow-500 to-red-500 h-2 rounded-full" style="width: 78%"></div>
                                </div>
                                <p class="text-xs text-slate-400">78% chance of flooding in low-lying areas</p>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Evacuation Routes</span>
                                    <span class="text-green-400 text-sm">Optimized</span>
                                </div>
                                <p class="text-xs text-slate-400 mb-2">AI has calculated 5 safe evacuation routes</p>
                                <button class="text-primary text-xs hover:underline">View Routes ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-slate-400 text-sm">Active Alerts</p>
                            <p class="text-2xl font-bold text-red-400">23</p>
                        </div>
                        <div class="w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center">
                            <i class="ri-alarm-warning-line text-red-400 text-xl"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-slate-400 text-sm">People Evacuated</p>
                            <p class="text-2xl font-bold text-green-400">1,247</p>
                        </div>
                        <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center">
                            <i class="ri-user-3-line text-green-400 text-xl"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-slate-400 text-sm">Rescue Operations</p>
                            <p class="text-2xl font-bold text-blue-400">15</p>
                        </div>
                        <div class="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center">
                            <i class="ri-plane-line text-blue-400 text-xl"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-slate-400 text-sm">AI Accuracy</p>
                            <p class="text-2xl font-bold text-primary">94.2%</p>
                        </div>
                        <div class="w-12 h-12 bg-primary/20 rounded-lg flex items-center justify-center">
                            <i class="ri-brain-line text-primary text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Analytics Page -->
        <div id="analyticsPage" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h2 class="text-xl font-semibold flex items-center mb-6">
                            <i class="ri-line-chart-line text-primary mr-2"></i>
                            Historical Flood Data Analysis
                        </h2>
                        <div id="historicalChart" class="h-80"></div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="ri-pie-chart-line text-primary mr-2"></i>
                                Risk Zone Distribution
                            </h3>
                            <div id="riskChart" class="h-64"></div>
                        </div>
                        <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                            <h3 class="text-lg font-semibold mb-4 flex items-center">
                                <i class="ri-bar-chart-line text-primary mr-2"></i>
                                Response Time Metrics
                            </h3>
                            <div id="responseChart" class="h-64"></div>
                        </div>
                    </div>

                    <!-- Data Tables -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-table-line text-primary mr-2"></i>
                            Recent Incident Reports
                        </h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="border-b border-slate-700">
                                        <th class="text-left py-3 px-4 font-medium text-slate-300">Date</th>
                                        <th class="text-left py-3 px-4 font-medium text-slate-300">Location</th>
                                        <th class="text-left py-3 px-4 font-medium text-slate-300">Severity</th>
                                        <th class="text-left py-3 px-4 font-medium text-slate-300">Response Time</th>
                                        <th class="text-left py-3 px-4 font-medium text-slate-300">Status</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-slate-700/50">
                                    <tr class="hover:bg-slate-800/30">
                                        <td class="py-3 px-4">2024-01-15</td>
                                        <td class="py-3 px-4">Riverside District</td>
                                        <td class="py-3 px-4">
                                            <span class="bg-red-500/20 text-red-400 px-2 py-1 rounded-full text-xs">Critical</span>
                                        </td>
                                        <td class="py-3 px-4">8 min</td>
                                        <td class="py-3 px-4">
                                            <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded-full text-xs">Resolved</span>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-slate-800/30">
                                        <td class="py-3 px-4">2024-01-14</td>
                                        <td class="py-3 px-4">Northern Sector</td>
                                        <td class="py-3 px-4">
                                            <span class="bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full text-xs">High</span>
                                        </td>
                                        <td class="py-3 px-4">12 min</td>
                                        <td class="py-3 px-4">
                                            <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded-full text-xs">Resolved</span>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-slate-800/30">
                                        <td class="py-3 px-4">2024-01-13</td>
                                        <td class="py-3 px-4">Zone B</td>
                                        <td class="py-3 px-4">
                                            <span class="bg-orange-500/20 text-orange-400 px-2 py-1 rounded-full text-xs">Medium</span>
                                        </td>
                                        <td class="py-3 px-4">15 min</td>
                                        <td class="py-3 px-4">
                                            <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded-full text-xs">Resolved</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-brain-line text-primary mr-2"></i>
                            AI Model Performance
                        </h3>
                        <div class="space-y-4">
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Prediction Accuracy</span>
                                    <span class="text-primary">94.2%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2 mb-2">
                                    <div class="bg-primary h-2 rounded-full" style="width: 94.2%"></div>
                                </div>
                                <p class="text-xs text-slate-400">Improved by 3.2% this month</p>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">False Positive Rate</span>
                                    <span class="text-green-400">2.1%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2 mb-2">
                                    <div class="bg-green-400 h-2 rounded-full" style="width: 2.1%"></div>
                                </div>
                                <p class="text-xs text-slate-400">Reduced by 0.8% this month</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-calendar-line text-primary mr-2"></i>
                            Seasonal Analysis
                        </h3>
                        <div id="seasonalChart" class="h-48"></div>
                        <div class="mt-4 space-y-2 text-sm">
                            <div class="flex items-center justify-between">
                                <span class="text-slate-400">Monsoon Peak:</span>
                                <span>June - September</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-slate-400">High Risk Months:</span>
                                <span class="text-red-400">July, August</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-download-line text-primary mr-2"></i>
                            Export Data
                        </h3>
                        <div class="space-y-3">
                            <button class="w-full bg-primary/20 text-primary border border-primary/30 px-4 py-2 rounded-button text-sm hover:bg-primary/30 transition-colors">
                                <i class="ri-file-excel-line mr-2"></i>
                                Export to Excel
                            </button>
                            <button class="w-full bg-slate-700/50 text-white border border-slate-600/30 px-4 py-2 rounded-button text-sm hover:bg-slate-700 transition-colors">
                                <i class="ri-file-pdf-line mr-2"></i>
                                Generate PDF Report
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Teams Page -->
        <div id="teamsPage" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-xl font-semibold flex items-center">
                                <i class="ri-team-line text-primary mr-2"></i>
                                Team Management
                            </h2>
                            <button class="bg-primary/20 text-primary border border-primary/30 px-4 py-2 rounded-button text-sm hover:bg-primary/30 transition-colors">
                                <i class="ri-add-line mr-1"></i>
                                Add New Team
                            </button>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Team Card 1 -->
                            <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-600/30">
                                <div class="flex items-center space-x-3 mb-3">
                                    <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">
                                        <i class="ri-team-line text-blue-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Rapid Response Unit</h4>
                                        <p class="text-sm text-slate-400">Team ID: RR-001</p>
                                    </div>
                                </div>
                                <div class="space-y-2 mb-3">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Status:</span>
                                        <span class="text-green-400 flex items-center">
                                            <div class="w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"></div>
                                            Active
                                        </span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Members:</span>
                                        <span>8</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Location:</span>
                                        <span>Zone A</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Equipment:</span>
                                        <span class="text-primary">98% Ready</span>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="flex-1 bg-slate-700/50 text-white px-3 py-1.5 rounded-button text-sm hover:bg-slate-700 transition-colors">
                                        View Details
                                    </button>
                                    <button class="flex-1 bg-primary/20 text-primary border border-primary/30 px-3 py-1.5 rounded-button text-sm hover:bg-primary/30 transition-colors">
                                        Contact
                                    </button>
                                </div>
                            </div>

                            <!-- Team Card 2 -->
                            <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-600/30">
                                <div class="flex items-center space-x-3 mb-3">
                                    <div class="w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center">
                                        <i class="ri-hospital-line text-yellow-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Medical Support Team</h4>
                                        <p class="text-sm text-slate-400">Team ID: MS-002</p>
                                    </div>
                                </div>
                                <div class="space-y-2 mb-3">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Status:</span>
                                        <span class="text-yellow-400 flex items-center">
                                            <div class="w-2 h-2 bg-yellow-400 rounded-full mr-1 animate-pulse"></div>
                                            On Mission
                                        </span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Members:</span>
                                        <span>6</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Location:</span>
                                        <span>Zone B</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Equipment:</span>
                                        <span class="text-primary">95% Ready</span>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="flex-1 bg-slate-700/50 text-white px-3 py-1.5 rounded-button text-sm hover:bg-slate-700 transition-colors">
                                        View Details
                                    </button>
                                    <button class="flex-1 bg-yellow-500/20 text-yellow-400 border border-yellow-500/30 px-3 py-1.5 rounded-button text-sm" disabled>
                                        Busy
                                    </button>
                                </div>
                            </div>

                            <!-- Team Card 3 -->
                            <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-600/30">
                                <div class="flex items-center space-x-3 mb-3">
                                    <div class="w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center">
                                        <i class="ri-ship-line text-purple-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Water Rescue Unit</h4>
                                        <p class="text-sm text-slate-400">Team ID: WR-003</p>
                                    </div>
                                </div>
                                <div class="space-y-2 mb-3">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Status:</span>
                                        <span class="text-green-400 flex items-center">
                                            <div class="w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"></div>
                                            Standby
                                        </span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Members:</span>
                                        <span>10</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Location:</span>
                                        <span>Marina Base</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Equipment:</span>
                                        <span class="text-primary">100% Ready</span>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="flex-1 bg-slate-700/50 text-white px-3 py-1.5 rounded-button text-sm hover:bg-slate-700 transition-colors">
                                        View Details
                                    </button>
                                    <button class="flex-1 bg-primary/20 text-primary border border-primary/30 px-3 py-1.5 rounded-button text-sm hover:bg-primary/30 transition-colors">
                                        Deploy
                                    </button>
                                </div>
                            </div>

                            <!-- Team Card 4 -->
                            <div class="bg-slate-800/50 rounded-lg p-4 border border-slate-600/30">
                                <div class="flex items-center space-x-3 mb-3">
                                    <div class="w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center">
                                        <i class="ri-truck-line text-orange-400"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Supply & Logistics</h4>
                                        <p class="text-sm text-slate-400">Team ID: SL-004</p>
                                    </div>
                                </div>
                                <div class="space-y-2 mb-3">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Status:</span>
                                        <span class="text-red-400 flex items-center">
                                            <div class="w-2 h-2 bg-red-400 rounded-full mr-1 animate-pulse"></div>
                                            Emergency Deploy
                                        </span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Members:</span>
                                        <span>12</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Location:</span>
                                        <span>Multiple Zones</span>
                                    </div>
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-400">Equipment:</span>
                                        <span class="text-orange-400">85% Ready</span>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="flex-1 bg-slate-700/50 text-white px-3 py-1.5 rounded-button text-sm hover:bg-slate-700 transition-colors">
                                        View Details
                                    </button>
                                    <button class="flex-1 bg-red-500/20 text-red-400 border border-red-500/30 px-3 py-1.5 rounded-button text-sm" disabled>
                                        Active
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Team Performance Chart -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-bar-chart-line text-primary mr-2"></i>
                            Team Performance Metrics
                        </h3>
                        <div id="teamPerformanceChart" class="h-64"></div>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- Team Updates -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-notification-line text-primary mr-2"></i>
                            Live Team Updates
                        </h3>
                        <div class="space-y-4 max-h-80 overflow-y-auto">
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Rapid Response Unit</span>
                                    <span class="text-xs text-green-400">5 min ago</span>
                                </div>
                                <p class="text-sm text-slate-400 mb-2">Successfully evacuated 23 residents from flood-prone area</p>
                                <div class="flex items-center text-xs text-slate-500">
                                    <i class="ri-map-pin-line mr-1"></i>
                                    Sector 7, Block B
                                </div>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Medical Support Team</span>
                                    <span class="text-xs text-yellow-400">12 min ago</span>
                                </div>
                                <p class="text-sm text-slate-400 mb-2">Providing medical aid at temporary shelter</p>
                                <div class="flex items-center text-xs text-slate-500">
                                    <i class="ri-hospital-line mr-1"></i>
                                    Community Center, Zone B
                                </div>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Supply & Logistics</span>
                                    <span class="text-xs text-red-400">18 min ago</span>
                                </div>
                                <p class="text-sm text-slate-400 mb-2">Emergency supplies delivered to 3 evacuation centers</p>
                                <div class="flex items-center text-xs text-slate-500">
                                    <i class="ri-truck-line mr-1"></i>
                                    Multiple Locations
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Team Communication -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-message-3-line text-primary mr-2"></i>
                            Quick Commands
                        </h3>
                        <div class="space-y-3">
                            <button class="w-full bg-red-500/20 text-red-400 border border-red-500/30 px-4 py-2 rounded-button text-sm hover:bg-red-500/30 transition-colors">
                                <i class="ri-alarm-warning-line mr-2"></i>
                                Emergency Broadcast
                            </button>
                            <button class="w-full bg-primary/20 text-primary border border-primary/30 px-4 py-2 rounded-button text-sm hover:bg-primary/30 transition-colors">
                                <i class="ri-send-plane-line mr-2"></i>
                                Dispatch All Teams
                            </button>
                            <button class="w-full bg-yellow-500/20 text-yellow-400 border border-yellow-500/30 px-4 py-2 rounded-button text-sm hover:bg-yellow-500/30 transition-colors">
                                <i class="ri-map-pin-line mr-2"></i>
                                Update Positions
                            </button>
                        </div>
                    </div>

                    <!-- Resource Status -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-tools-line text-primary mr-2"></i>
                            Resource Status
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Rescue Boats</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-16 bg-slate-700 rounded-full h-2">
                                        <div class="bg-green-400 h-2 rounded-full" style="width: 85%"></div>
                                    </div>
                                    <span class="text-xs text-slate-400">17/20</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Medical Kits</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-16 bg-slate-700 rounded-full h-2">
                                        <div class="bg-yellow-400 h-2 rounded-full" style="width: 60%"></div>
                                    </div>
                                    <span class="text-xs text-slate-400">72/120</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Emergency Supplies</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-16 bg-slate-700 rounded-full h-2">
                                        <div class="bg-red-400 h-2 rounded-full" style="width: 25%"></div>
                                    </div>
                                    <span class="text-xs text-slate-400">25/100</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Safe Route Finder Page -->
        <div id="routeFinderPage" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <!-- Route Finder Form -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h2 class="text-xl font-semibold flex items-center mb-6">
                            <i class="ri-route-line text-primary mr-2"></i>
                            Safe Route Finder
                        </h2>
                        <form id="routeFinderForm" class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">From Location</label>
                                    <input type="text" id="fromLocation" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white" placeholder="Enter starting location">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">To Location</label>
                                    <input type="text" id="toLocation" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white" placeholder="Enter destination">
                                </div>
                            </div>
                            <button type="submit" class="w-full bg-primary hover:bg-primary/80 text-white px-6 py-3 rounded-button font-semibold transition-all duration-300 hover:shadow-lg hover:shadow-primary/25">
                                <i class="ri-search-line mr-2"></i>
                                Find Safe Route
                            </button>
                        </form>
                    </div>

                    <!-- Route Results -->
                    <div id="routeResults" class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6 hidden">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-map-pin-line text-green-400 mr-2"></i>
                            Recommended Route
                        </h3>
                        <div id="routeDetails" class="space-y-4">
                            <!-- Route details will be populated here -->
                        </div>
                    </div>

                    <!-- Route Map -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-map-2-line text-primary mr-2"></i>
                            Route Visualization
                        </h3>
                        <div id="routeMap" class="h-96 bg-slate-800 rounded-lg border border-slate-700"></div>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- Safety Legend -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-shield-check-line text-green-400 mr-2"></i>
                            Safety Legend
                        </h3>
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-green-500 rounded-full"></div>
                                <span class="text-sm">Safe Route</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-yellow-500 rounded-full"></div>
                                <span class="text-sm">Moderate Risk</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="w-4 h-4 bg-red-500 rounded-full"></div>
                                <span class="text-sm">High Risk Zone</span>
                            </div>
                        </div>
                    </div>

                    <!-- Route Statistics -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-bar-chart-line text-primary mr-2"></i>
                            Route Statistics
                        </h3>
                        <div id="routeStats" class="space-y-4">
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Safety Score</span>
                                    <span class="text-green-400 font-semibold">85%</span>
                                </div>
                                <div class="w-full bg-slate-700 rounded-full h-2">
                                    <div class="bg-green-400 h-2 rounded-full" style="width: 85%"></div>
                                </div>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Estimated Time</span>
                                    <span class="text-blue-400 font-semibold">25 min</span>
                                </div>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">Distance</span>
                                    <span class="text-purple-400 font-semibold">12.5 km</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Live Risk Dashboard Page -->
        <div id="riskDashboardPage" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Live IoT Data Cards -->
                <div class="lg:col-span-3 space-y-6">
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h2 class="text-xl font-semibold flex items-center mb-6">
                            <i class="ri-dashboard-line text-primary mr-2"></i>
                            Live Risk Dashboard
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- Water Level Card -->
                            <div id="waterLevelCard" class="bg-slate-800/50 rounded-xl p-6 border border-slate-600/30 hover:border-green-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-green-500/10">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center">
                                        <i class="ri-water-flash-line text-green-400 text-xl"></i>
                                    </div>
                                    <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                </div>
                                <h3 class="text-lg font-semibold mb-2">Water Level</h3>
                                <div class="text-3xl font-bold text-green-400 mb-2" id="waterLevelValue">2.3m</div>
                                <div class="text-sm text-slate-400">Status: <span class="text-green-400">Safe</span></div>
                                <div class="mt-4 bg-slate-700 rounded-full h-2">
                                    <div class="bg-green-400 h-2 rounded-full transition-all duration-500" style="width: 30%"></div>
                                </div>
                            </div>

                            <!-- Rainfall Card -->
                            <div id="rainfallCard" class="bg-slate-800/50 rounded-xl p-6 border border-slate-600/30 hover:border-yellow-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-yellow-500/10">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center">
                                        <i class="ri-cloudy-2-line text-yellow-400 text-xl"></i>
                                    </div>
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full animate-pulse"></div>
                                </div>
                                <h3 class="text-lg font-semibold mb-2">Rainfall</h3>
                                <div class="text-3xl font-bold text-yellow-400 mb-2" id="rainfallValue">45mm/hr</div>
                                <div class="text-sm text-slate-400">Status: <span class="text-yellow-400">Moderate</span></div>
                                <div class="mt-4 bg-slate-700 rounded-full h-2">
                                    <div class="bg-yellow-400 h-2 rounded-full transition-all duration-500" style="width: 60%"></div>
                                </div>
                            </div>

                            <!-- River Flow Card -->
                            <div id="riverFlowCard" class="bg-slate-800/50 rounded-xl p-6 border border-slate-600/30 hover:border-red-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-red-500/10">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center">
                                        <i class="ri-flow-chart text-red-400 text-xl"></i>
                                    </div>
                                    <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                                </div>
                                <h3 class="text-lg font-semibold mb-2">River Flow</h3>
                                <div class="text-3xl font-bold text-red-400 mb-2" id="riverFlowValue">8.2m¬≥/s</div>
                                <div class="text-sm text-slate-400">Status: <span class="text-red-400">High</span></div>
                                <div class="mt-4 bg-slate-700 rounded-full h-2">
                                    <div class="bg-red-400 h-2 rounded-full transition-all duration-500" style="width: 85%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Risk Map -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-map-2-line text-primary mr-2"></i>
                            Live Risk Map
                        </h3>
                        <div id="riskMap" class="h-96 bg-slate-800 rounded-lg border border-slate-700"></div>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- Risk Status -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-alarm-warning-line text-yellow-500 mr-2"></i>
                            Overall Risk Status
                        </h3>
                        <div class="text-center">
                            <div class="text-4xl font-bold text-yellow-400 mb-2" id="overallRisk">MODERATE</div>
                            <div class="text-sm text-slate-400 mb-4">Last updated: <span id="lastUpdate">2 min ago</span></div>
                            <div class="w-full bg-slate-700 rounded-full h-3 mb-4">
                                <div class="bg-yellow-400 h-3 rounded-full transition-all duration-500" style="width: 65%"></div>
                            </div>
                            <div class="text-xs text-slate-500">Risk Level: 65%</div>
                        </div>
                    </div>

                    <!-- Recent Alerts -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-notification-line text-primary mr-2"></i>
                            Recent Alerts
                        </h3>
                        <div id="recentAlerts" class="space-y-3 max-h-60 overflow-y-auto">
                            <div class="bg-red-500/10 border border-red-500/30 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="text-red-400 text-xs font-medium">HIGH RISK</span>
                                    <span class="text-xs text-slate-400">5 min ago</span>
                                </div>
                                <p class="text-sm">River flow exceeded safe levels</p>
                            </div>
                            <div class="bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-1">
                                    <span class="text-yellow-400 text-xs font-medium">MODERATE</span>
                                    <span class="text-xs text-slate-400">12 min ago</span>
                                </div>
                                <p class="text-sm">Rainfall intensity increasing</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Telegram Bot Integration Page -->
        <div id="telegramBotPage" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-6">
                    <!-- Bot Information -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h2 class="text-xl font-semibold flex items-center mb-6">
                            <i class="ri-telegram-line text-blue-400 mr-2"></i>
                            üí¨ Talk to our Disaster Assistant on Telegram
                        </h2>
                        <div class="space-y-4">
                            <p class="text-slate-300">
                                Get instant flood alerts, emergency assistance, and real-time updates through our AI-powered Telegram bot.
                            </p>
                            <div class="bg-blue-500/10 border border-blue-500/30 rounded-lg p-4">
                                <h3 class="font-semibold text-blue-400 mb-2">Bot Features:</h3>
                                <ul class="text-sm text-slate-300 space-y-1">
                                    <li>‚Ä¢ Real-time flood alerts</li>
                                    <li>‚Ä¢ Emergency SOS requests</li>
                                    <li>‚Ä¢ Location-based warnings</li>
                                    <li>‚Ä¢ Rescue team coordination</li>
                                    <li>‚Ä¢ Weather updates</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- QR Code -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-qr-code-line text-primary mr-2"></i>
                            Scan QR Code
                        </h3>
                        <div class="text-center">
                            <div class="bg-white p-4 rounded-lg inline-block mb-4">
                                <div class="w-48 h-48 bg-gray-200 rounded flex items-center justify-center">
                                    <span class="text-gray-500 text-sm">QR Code Placeholder</span>
                                </div>
                            </div>
                            <p class="text-sm text-slate-400 mb-4">Scan with your phone to open Telegram bot</p>
                            <button onclick="window.open('https://t.me/jalraksha_ai_bot', '_blank')" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-button font-semibold transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/25">
                                <i class="ri-telegram-line mr-2"></i>
                                Open Telegram Bot
                            </button>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- Bot Demo Screenshot -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-smartphone-line text-primary mr-2"></i>
                            Bot Demo
                        </h3>
                        <div class="bg-slate-800 rounded-lg p-4">
                            <div class="bg-white rounded-lg p-4 mb-4">
                                <div class="flex items-center space-x-3 mb-3">
                                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                        <i class="ri-telegram-line text-white text-sm"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium">JalRakshƒÅ AI Bot</div>
                                        <div class="text-xs text-gray-500">Online</div>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <div class="bg-blue-100 rounded-lg p-2 text-sm">
                                        üåä Welcome to JalRakshƒÅ AI Emergency System!
                                    </div>
                                    <div class="bg-gray-100 rounded-lg p-2 text-sm">
                                        Send SOS for emergency assistance
                                    </div>
                                    <div class="bg-blue-100 rounded-lg p-2 text-sm">
                                        üö® EMERGENCY SOS ACTIVATED! Help is on the way!
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm text-slate-400 text-center">Live bot interaction demo</p>
                        </div>
                    </div>

                    <!-- Bot Statistics -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-bar-chart-line text-primary mr-2"></i>
                            Bot Statistics
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Active Users</span>
                                <span class="text-blue-400 font-semibold">1,247</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Messages Today</span>
                                <span class="text-green-400 font-semibold">3,456</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">SOS Requests</span>
                                <span class="text-red-400 font-semibold">23</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Response Time</span>
                                <span class="text-yellow-400 font-semibold">2.3s</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Crowdsourced Reports Page -->
        <div id="crowdsourcedPage" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <!-- Report Form -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h2 class="text-xl font-semibold flex items-center mb-6">
                            <i class="ri-report-line text-orange-400 mr-2"></i>
                            Report Flood Issue
                        </h2>
                        <form id="reportForm" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">Location</label>
                                <input type="text" id="reportLocation" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white" placeholder="Enter exact location or landmark">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Issue Description</label>
                                <textarea id="reportDescription" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white h-24 resize-none" placeholder="Describe the flood situation, blocked roads, or emergency needs..."></textarea>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Severity</label>
                                    <select id="reportSeverity" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white">
                                        <option value="low">Low - Minor flooding</option>
                                        <option value="medium">Medium - Moderate flooding</option>
                                        <option value="high">High - Severe flooding</option>
                                        <option value="critical">Critical - Emergency</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-2">Contact (Optional)</label>
                                    <input type="tel" id="reportContact" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white" placeholder="Your phone number">
                                </div>
                            </div>
                            <button type="submit" class="w-full bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-button font-semibold transition-all duration-300 hover:shadow-lg hover:shadow-orange-500/25">
                                <i class="ri-send-plane-line mr-2"></i>
                                Submit Report
                            </button>
                        </form>
                    </div>

                    <!-- Reports Map -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-map-2-line text-primary mr-2"></i>
                            Reported Issues Map
                        </h3>
                        <div id="reportsMap" class="h-96 bg-slate-800 rounded-lg border border-slate-700"></div>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- Recent Reports -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-list-check text-primary mr-2"></i>
                            Recent Reports
                        </h3>
                        <div id="recentReports" class="space-y-3 max-h-80 overflow-y-auto">
                            <div class="bg-red-500/10 border border-red-500/30 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-red-400 text-xs font-medium">‚ö†Ô∏è CRITICAL</span>
                                    <span class="text-xs text-slate-400">5 min ago</span>
                                </div>
                                <p class="text-sm font-medium mb-1">Riverside District</p>
                                <p class="text-xs text-slate-400">Severe flooding, roads blocked</p>
                            </div>
                            <div class="bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-yellow-400 text-xs font-medium">‚ö†Ô∏è HIGH</span>
                                    <span class="text-xs text-slate-400">12 min ago</span>
                                </div>
                                <p class="text-sm font-medium mb-1">Northern Sector</p>
                                <p class="text-xs text-slate-400">Water level rising rapidly</p>
                            </div>
                            <div class="bg-orange-500/10 border border-orange-500/30 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-orange-400 text-xs font-medium">‚ö†Ô∏è MEDIUM</span>
                                    <span class="text-xs text-slate-400">25 min ago</span>
                                </div>
                                <p class="text-sm font-medium mb-1">Zone B</p>
                                <p class="text-xs text-slate-400">Drainage system overflow</p>
                            </div>
                        </div>
                    </div>

                    <!-- Report Statistics -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-bar-chart-line text-primary mr-2"></i>
                            Report Statistics
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Total Reports</span>
                                <span class="text-blue-400 font-semibold">156</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Critical Issues</span>
                                <span class="text-red-400 font-semibold">12</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Resolved</span>
                                <span class="text-green-400 font-semibold">89</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Response Time</span>
                                <span class="text-yellow-400 font-semibold">8 min</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rescue Team Tracking Page -->
        <div id="rescueTrackingPage" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <!-- Rescue Teams Map -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h2 class="text-xl font-semibold flex items-center mb-6">
                            <i class="ri-team-line text-primary mr-2"></i>
                            Rescue Team Tracking
                        </h2>
                        <div id="rescueMap" class="h-96 bg-slate-800 rounded-lg border border-slate-700"></div>
                    </div>

                    <!-- Team Status -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-radar-line text-primary mr-2"></i>
                            Team Status Updates
                        </h3>
                        <div id="teamStatusUpdates" class="space-y-4">
                            <div class="bg-green-500/10 border border-green-500/30 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-green-400 text-sm font-medium">üöë Team Alpha-1</span>
                                    <span class="text-xs text-slate-400">2 min ago</span>
                                </div>
                                <p class="text-sm mb-2">Dispatched to Sector 15, Building A-203</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-400">ETA: 8 minutes</span>
                                    <span class="text-xs text-green-400">En Route</span>
                                </div>
                            </div>
                            <div class="bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-yellow-400 text-sm font-medium">üöë Team Beta-2</span>
                                    <span class="text-xs text-slate-400">5 min ago</span>
                                </div>
                                <p class="text-sm mb-2">Standby at Sector 22, Zone B</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-slate-400">Status: Available</span>
                                    <span class="text-xs text-yellow-400">Ready</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- Active Teams -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-team-line text-primary mr-2"></i>
                            Active Teams
                        </h3>
                        <div class="space-y-3">
                            <div class="bg-slate-800/50 rounded-lg p-3 border border-green-500/30">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-green-400">Team Alpha-1</span>
                                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                </div>
                                <p class="text-xs text-slate-400">On Mission - ETA: 8 min</p>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-3 border border-yellow-500/30">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-yellow-400">Team Beta-2</span>
                                    <div class="w-2 h-2 bg-yellow-500 rounded-full animate-pulse"></div>
                                </div>
                                <p class="text-xs text-slate-400">Standby - Available</p>
                            </div>
                            <div class="bg-slate-800/50 rounded-lg p-3 border border-blue-500/30">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-blue-400">Team Gamma-3</span>
                                    <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                                </div>
                                <p class="text-xs text-slate-400">Standby - Available</p>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency Dispatch -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-alarm-warning-line text-red-500 mr-2"></i>
                            Emergency Dispatch
                        </h3>
                        <div class="space-y-3">
                            <button class="w-full bg-red-500/20 text-red-400 border border-red-500/30 px-4 py-2 rounded-button text-sm hover:bg-red-500/30 transition-colors">
                                <i class="ri-send-plane-line mr-2"></i>
                                Dispatch Nearest Team
                            </button>
                            <button class="w-full bg-blue-500/20 text-blue-400 border border-blue-500/30 px-4 py-2 rounded-button text-sm hover:bg-blue-500/30 transition-colors">
                                <i class="ri-team-line mr-2"></i>
                                Dispatch All Teams
                            </button>
                            <button class="w-full bg-yellow-500/20 text-yellow-400 border border-yellow-500/30 px-4 py-2 rounded-button text-sm hover:bg-yellow-500/30 transition-colors">
                                <i class="ri-refresh-line mr-2"></i>
                                Update Positions
                            </button>
                        </div>
                    </div>

                    <!-- Team Statistics -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-bar-chart-line text-primary mr-2"></i>
                            Team Statistics
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Active Teams</span>
                                <span class="text-green-400 font-semibold">3</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Missions Today</span>
                                <span class="text-blue-400 font-semibold">12</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Avg Response Time</span>
                                <span class="text-yellow-400 font-semibold">8.5 min</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Success Rate</span>
                                <span class="text-purple-400 font-semibold">94%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div id="settingsPage" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h2 class="text-xl font-semibold flex items-center mb-6">
                            <i class="ri-settings-3-line text-primary mr-2"></i>
                            System Configuration
                        </h2>

                        <div class="space-y-6">
                            <!-- Notification Settings -->
                            <div>
                                <h3 class="text-lg font-medium mb-4">Notification Settings</h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-4 bg-slate-800/50 rounded-lg">
                                        <div>
                                            <p class="font-medium">Emergency Alerts</p>
                                            <p class="text-sm text-slate-400">Receive critical emergency notifications</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between p-4 bg-slate-800/50 rounded-lg">
                                        <div>
                                            <p class="font-medium">Team Updates</p>
                                            <p class="text-sm text-slate-400">Get notified about team status changes</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between p-4 bg-slate-800/50 rounded-lg">
                                        <div>
                                            <p class="font-medium">Weather Updates</p>
                                            <p class="text-sm text-slate-400">Automated weather and rainfall alerts</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer">
                                            <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Map Settings -->
                            <div>
                                <h3 class="text-lg font-medium mb-4">Map Configuration</h3>
                                <div class="space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Default View</label>
                                            <select class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white">
                                                <option>Satellite View</option>
                                                <option>Terrain View</option>
                                                <option>Street View</option>
                                                <option>Hybrid View</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium mb-2">Default Zoom Level</label>
                                            <select class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white">
                                                <option>City Wide (Level 10)</option>
                                                <option>District Wide (Level 12)</option>
                                                <option>Neighborhood (Level 15)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- AI Settings -->
                            <div>
                                <h3 class="text-lg font-medium mb-4">AI Configuration</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Alert Sensitivity</label>
                                        <div class="flex items-center space-x-4">
                                            <span class="text-sm text-slate-400">Low</span>
                                            <input type="range" min="1" max="5" value="3" class="flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer slider">
                                            <span class="text-sm text-slate-400">High</span>
                                        </div>
                                        <p class="text-xs text-slate-500 mt-1">Current: Medium Sensitivity</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2">Prediction Timeframe</label>
                                        <select class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white">
                                            <option>6 hours</option>
                                            <option selected>12 hours</option>
                                            <option>24 hours</option>
                                            <option>48 hours</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- Security Settings -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-shield-line text-primary mr-2"></i>
                            Security & Access
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium">Two-Factor Authentication</p>
                                    <p class="text-sm text-slate-400">Enhanced account security</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" checked>
                                    <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium">Session Timeout</p>
                                    <p class="text-sm text-slate-400">Auto-logout after inactivity</p>
                                </div>
                                <select class="bg-slate-800 border border-slate-600 rounded-lg px-3 py-1 text-white text-sm">
                                    <option>15 min</option>
                                    <option selected>30 min</option>
                                    <option>1 hour</option>
                                    <option>Never</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Data & Privacy -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-database-line text-primary mr-2"></i>
                            Data Management
                        </h3>
                        <div class="space-y-4">
                            <div>
                                <p class="font-medium mb-2">Data Retention Period</p>
                                <select class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white">
                                    <option>30 days</option>
                                    <option>90 days</option>
                                    <option selected>1 year</option>
                                    <option>3 years</option>
                                </select>
                            </div>
                            <div class="space-y-2">
                                <button class="w-full bg-primary/20 text-primary border border-primary/30 px-4 py-2 rounded-button text-sm hover:bg-primary/30 transition-colors">
                                    <i class="ri-download-line mr-2"></i>
                                    Export System Data
                                </button>
                                <button class="w-full bg-slate-700/50 text-white border border-slate-600/30 px-4 py-2 rounded-button text-sm hover:bg-slate-700 transition-colors">
                                    <i class="ri-refresh-line mr-2"></i>
                                    Clear Cache
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- System Status -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-heart-pulse-line text-primary mr-2"></i>
                            System Health
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-sm">API Status</span>
                                <span class="text-green-400 text-sm flex items-center">
                                    <div class="w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"></div>
                                    Operational
                                </span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">Database</span>
                                <span class="text-green-400 text-sm flex items-center">
                                    <div class="w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"></div>
                                    Healthy
                                </span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">AI Models</span>
                                <span class="text-green-400 text-sm flex items-center">
                                    <div class="w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"></div>
                                    Active
                                </span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm">External APIs</span>
                                <span class="text-yellow-400 text-sm flex items-center">
                                    <div class="w-2 h-2 bg-yellow-400 rounded-full mr-1 animate-pulse"></div>
                                    Partial
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Support -->
                    <div class="bg-slate-900/50 backdrop-blur-sm rounded-xl border border-slate-700/50 p-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="ri-customer-service-line text-primary mr-2"></i>
                            Support & Help
                        </h3>
                        <div class="space-y-3">
                            <button class="w-full bg-primary/20 text-primary border border-primary/30 px-4 py-2 rounded-button text-sm hover:bg-primary/30 transition-colors">
                                <i class="ri-book-line mr-2"></i>
                                User Manual
                            </button>
                            <button class="w-full bg-slate-700/50 text-white border border-slate-600/30 px-4 py-2 rounded-button text-sm hover:bg-slate-700 transition-colors">
                                <i class="ri-question-line mr-2"></i>
                                FAQ
                            </button>
                            <button class="w-full bg-slate-700/50 text-white border border-slate-600/30 px-4 py-2 rounded-button text-sm hover:bg-slate-700 transition-colors">
                                <i class="ri-mail-line mr-2"></i>
                                Contact Support
                            </button>
                        </div>
                        <div class="mt-4 text-center">
                            <p class="text-xs text-slate-500">Version 2.1.0</p>
                            <p class="text-xs text-slate-500">Last Updated: Jan 15, 2024</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- SOS Modal -->
    <div id="sosModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-slate-900 rounded-xl border border-slate-700 p-6 w-full max-w-md">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-red-400 flex items-center">
                        <i class="ri-alarm-warning-line mr-2"></i>
                        Emergency SOS
                    </h3>
                    <button id="closeSos" class="w-8 h-8 flex items-center justify-center text-slate-400 hover:text-white">
                        <i class="ri-close-line"></i>
                    </button>
                </div>
                <form id="sosForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Emergency Type</label>
                        <select id="emergencyType" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white">
                            <option value="medical">Medical Emergency</option>
                            <option value="evacuation">Evacuation Needed</option>
                            <option value="supplies">Food & Water</option>
                            <option value="shelter">Shelter Required</option>
                            <option value="rescue">Rescue Required</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Location</label>
                        <input type="text" id="emergencyLocation" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white" placeholder="Enter your exact location">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Contact Number</label>
                        <input type="tel" id="emergencyContact" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white" placeholder="Your phone number">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Number of People</label>
                        <select id="peopleCount" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white">
                            <option value="1">1 person</option>
                            <option value="2-5">2-5 people</option>
                            <option value="6-10">6-10 people</option>
                            <option value="10+">More than 10 people</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Description</label>
                        <textarea id="emergencyDescription" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 text-white h-20 resize-none" placeholder="Describe the emergency situation in detail..."></textarea>
                    </div>
                    <button type="submit" class="w-full bg-red-500 hover:bg-red-600 text-white px-4 py-3 rounded-button font-semibold">
                        <i class="ri-send-plane-line mr-2"></i>
                        Submit Emergency Request
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-slate-900 rounded-xl border border-slate-700 p-6 w-full max-w-md text-center">
                <div class="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="ri-check-line text-3xl text-green-400"></i>
                </div>
                <h3 class="text-xl font-semibold text-green-400 mb-2">SOS Request Sent!</h3>
                <p class="text-slate-400 mb-4">Your emergency request has been successfully submitted. Help is on the way!</p>
                <div class="bg-slate-800/50 rounded-lg p-4 mb-4">
                    <p class="text-sm text-slate-300 mb-2"><strong>Request ID:</strong> SOS-2024-001547</p>
                    <p class="text-sm text-slate-300 mb-2"><strong>Assigned Team:</strong> Rapid Response Unit</p>
                    <p class="text-sm text-slate-300"><strong>ETA:</strong> 12 minutes</p>
                </div>
                <button id="closeSuccess" class="w-full bg-primary/20 text-primary border border-primary/30 px-4 py-2 rounded-button text-sm hover:bg-primary/30 transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // JalRakshƒÅ AI - Custom Real-time Data Management
        let jalrakshaData = {
            floodPredictions: [],
            emergencyRequests: [],
            sensorReadings: [],
            rescueTeams: [],
            citiesData: [],
            lastSync: null,
            systemStatus: 'online'
        };

        // JalRakshƒÅ AI - Indian Cities Database with Coordinates
        const INDIAN_CITIES_DATA = {
            "Mumbai": { lat: 19.0760, lng: 72.8777, state: "Maharashtra", population: "20M", flood_risk: 0.8 },
            "Delhi": { lat: 28.7041, lng: 77.1025, state: "Delhi", population: "19M", flood_risk: 0.3 },
            "Bangalore": { lat: 12.9716, lng: 77.5946, state: "Karnataka", population: "12M", flood_risk: 0.4 },
            "Chennai": { lat: 13.0827, lng: 80.2707, state: "Tamil Nadu", population: "11M", flood_risk: 0.9 },
            "Kolkata": { lat: 22.5726, lng: 88.3639, state: "West Bengal", population: "15M", flood_risk: 0.85 },
            "Hyderabad": { lat: 17.3850, lng: 78.4867, state: "Telangana", population: "10M", flood_risk: 0.5 },
            "Pune": { lat: 18.5204, lng: 73.8567, state: "Maharashtra", population: "7M", flood_risk: 0.6 },
            "Ahmedabad": { lat: 23.0225, lng: 72.5714, state: "Gujarat", population: "8M", flood_risk: 0.4 },
            "Jaipur": { lat: 26.9124, lng: 75.7873, state: "Rajasthan", population: "4M", flood_risk: 0.2 },
            "Surat": { lat: 21.1702, lng: 72.8311, state: "Gujarat", population: "6M", flood_risk: 0.7 },
            "Lucknow": { lat: 26.8467, lng: 80.9462, state: "Uttar Pradesh", population: "4M", flood_risk: 0.5 },
            "Kanpur": { lat: 26.4499, lng: 80.3319, state: "Uttar Pradesh", population: "3M", flood_risk: 0.6 },
            "Nagpur": { lat: 21.1458, lng: 79.0882, state: "Maharashtra", population: "3M", flood_risk: 0.3 },
            "Indore": { lat: 22.7196, lng: 75.8577, state: "Madhya Pradesh", population: "3M", flood_risk: 0.4 },
            "Thane": { lat: 19.2183, lng: 72.9781, state: "Maharashtra", population: "2M", flood_risk: 0.8 },
            "Bhopal": { lat: 23.2599, lng: 77.4126, state: "Madhya Pradesh", population: "2M", flood_risk: 0.3 },
            "Visakhapatnam": { lat: 17.6868, lng: 83.2185, state: "Andhra Pradesh", population: "2M", flood_risk: 0.7 },
            "Patna": { lat: 25.5941, lng: 85.1376, state: "Bihar", population: "2M", flood_risk: 0.8 },
            "Vadodara": { lat: 22.3072, lng: 73.1812, state: "Gujarat", population: "2M", flood_risk: 0.5 },
            "Kochi": { lat: 9.9312, lng: 76.2673, state: "Kerala", population: "2M", flood_risk: 0.9 },
            "Coimbatore": { lat: 11.0168, lng: 76.9558, state: "Tamil Nadu", population: "2M", flood_risk: 0.4 },
            "Trivandrum": { lat: 8.5241, lng: 76.9366, state: "Kerala", population: "1M", flood_risk: 0.8 },
            "Madurai": { lat: 9.9252, lng: 78.1198, state: "Tamil Nadu", population: "1M", flood_risk: 0.6 },
            "Tiruchirappalli": { lat: 10.7905, lng: 78.7047, state: "Tamil Nadu", population: "1M", flood_risk: 0.5 },
            "Salem": { lat: 11.6643, lng: 78.1460, state: "Tamil Nadu", population: "1M", flood_risk: 0.4 },
            "Tirunelveli": { lat: 8.7139, lng: 77.7567, state: "Tamil Nadu", population: "1M", flood_risk: 0.5 },
            "Erode": { lat: 11.3410, lng: 77.7172, state: "Tamil Nadu", population: "1M", flood_risk: 0.3 },
            "Thanjavur": { lat: 10.7867, lng: 79.1378, state: "Tamil Nadu", population: "1M", flood_risk: 0.6 },
            "Kollam": { lat: 8.8932, lng: 76.6141, state: "Kerala", population: "1M", flood_risk: 0.7 },
            "Thrissur": { lat: 10.5276, lng: 76.2144, state: "Kerala", population: "1M", flood_risk: 0.6 },
            "Kottayam": { lat: 9.5916, lng: 76.5222, state: "Kerala", population: "1M", flood_risk: 0.8 },
            "Palakkad": { lat: 10.7867, lng: 76.6548, state: "Kerala", population: "1M", flood_risk: 0.5 },
            "Malappuram": { lat: 11.0500, lng: 76.0700, state: "Kerala", population: "1M", flood_risk: 0.7 },
            "Kozhikode": { lat: 11.2588, lng: 75.7804, state: "Kerala", population: "1M", flood_risk: 0.8 },
            "Kannur": { lat: 11.8745, lng: 75.3704, state: "Kerala", population: "1M", flood_risk: 0.6 },
            "Kasaragod": { lat: 12.5000, lng: 74.9833, state: "Kerala", population: "1M", flood_risk: 0.7 },
            "Alappuzha": { lat: 9.4981, lng: 76.3388, state: "Kerala", population: "1M", flood_risk: 0.95 },
            "Pathanamthitta": { lat: 9.2647, lng: 76.7870, state: "Kerala", population: "1M", flood_risk: 0.6 },
            "Idukki": { lat: 9.8497, lng: 76.9681, state: "Kerala", population: "1M", flood_risk: 0.7 },
            "Wayanad": { lat: 11.6854, lng: 76.1320, state: "Kerala", population: "1M", flood_risk: 0.8 },
            "Ernakulam": { lat: 9.9816, lng: 76.2999, state: "Kerala", population: "1M", flood_risk: 0.9 }
        };

        // JalRakshƒÅ AI - Map Instance
        let jalrakshaMap = null;

        // Custom API Configuration for JalRakshƒÅ AI
        const JALRAKSHA_API = 'http://localhost:8000/api/v1';
        const EMERGENCY_BOT_API = 'http://localhost:5000';
        
        // API Configuration
        const API_CONFIG = {
            baseURL: 'http://localhost:8000/api/v1',
            endpoints: {
                alerts: '/alerts',
                floodMonitoring: '/flood/monitoring',
                cities: '/flood/cities',
                predictions: '/predict',
                sos: '/sos',
                disaster: '/disaster/cities',
                iot: '/iot/sensor-data',
                health: '/health'
            },
            timeout: 10000,
            retryAttempts: 3
        };

        // Realistic Mock Data that matches backend API structure
        const MOCK_DATA = {
            alerts: [
                {
                    id: 1,
                    water_level: 2.5,
                    rainfall: 45.2,
                    river_flow: 150.8,
                    risk_level: "MEDIUM",
                    confidence: 0.749,
                    timestamp: "2025-01-09T10:30:00Z"
                },
                {
                    id: 2,
                    water_level: 1.8,
                    rainfall: 32.1,
                    river_flow: 98.5,
                    risk_level: "LOW",
                    confidence: 0.856,
                    timestamp: "2025-01-09T10:25:00Z"
                },
                {
                    id: 3,
                    water_level: 3.2,
                    rainfall: 78.9,
                    river_flow: 245.3,
                    risk_level: "HIGH",
                    confidence: 0.923,
                    timestamp: "2025-01-09T10:20:00Z"
                }
            ],
            floodMonitoring: {
                cities: [
                    {
                        name: "Mumbai",
                        state: "Maharashtra",
                        lat: 19.0760,
                        lng: 72.8777,
                        water_level: 2.8,
                        rainfall: 65.4,
                        river_flow: 180.2,
                        risk_level: "HIGH",
                        confidence: 0.89,
                        population: "20M",
                        last_updated: "2025-01-09T10:30:00Z"
                    },
                    {
                        name: "Chennai",
                        state: "Tamil Nadu",
                        lat: 13.0827,
                        lng: 80.2707,
                        water_level: 1.5,
                        rainfall: 28.7,
                        river_flow: 95.3,
                        risk_level: "LOW",
                        confidence: 0.76,
                        population: "11M",
                        last_updated: "2025-01-09T10:30:00Z"
                    },
                    {
                        name: "Kolkata",
                        state: "West Bengal",
                        lat: 22.5726,
                        lng: 88.3639,
                        water_level: 2.1,
                        rainfall: 42.8,
                        river_flow: 125.6,
                        risk_level: "MEDIUM",
                        confidence: 0.82,
                        population: "15M",
                        last_updated: "2025-01-09T10:30:00Z"
                    }
                ],
                high_risk_count: 1,
                medium_risk_count: 1,
                low_risk_count: 1,
                total_cities: 3,
                last_updated: "2025-01-09T10:30:00Z"
            },
            sosRequests: [
                {
                    id: 1,
                    location: "Mumbai Central",
                    description: "Severe flooding in low-lying areas, roads blocked",
                    severity: "critical",
                    contact: "+91-9876543210",
                    platform: "telegram",
                    status: "active",
                    timestamp: "2025-01-09T10:25:00Z",
                    ai_analysis: {
                        priority: "HIGH",
                        suggested_actions: ["Evacuate immediately", "Contact rescue teams"],
                        confidence: 0.92
                    }
                },
                {
                    id: 2,
                    location: "Chennai Marina",
                    description: "Water level rising, need assistance",
                    severity: "medium",
                    contact: "+91-9876543211",
                    platform: "whatsapp",
                    status: "processing",
                    timestamp: "2025-01-09T10:20:00Z",
                    ai_analysis: {
                        priority: "MEDIUM",
                        suggested_actions: ["Monitor situation", "Prepare evacuation"],
                        confidence: 0.78
                    }
                }
            ],
            iotSensorData: [
                {
                    sensor_id: "MUM001",
                    city: "Mumbai",
                    water_level: 2.8,
                    rainfall: 65.4,
                    river_flow: 180.2,
                    temperature: 28.5,
                    humidity: 85.2,
                    pressure: 1013.2,
                    risk_level: "HIGH",
                    confidence: 0.89,
                    timestamp: "2025-01-09T10:30:00Z",
                    battery_level: 87,
                    signal_strength: 95
                },
                {
                    sensor_id: "CHN001",
                    city: "Chennai",
                    water_level: 1.5,
                    rainfall: 28.7,
                    river_flow: 95.3,
                    temperature: 32.1,
                    humidity: 72.8,
                    pressure: 1015.6,
                    risk_level: "LOW",
                    confidence: 0.76,
                    timestamp: "2025-01-09T10:30:00Z",
                    battery_level: 92,
                    signal_strength: 88
                }
            ],
            disasterCities: [
                {
                    name: "Mumbai",
                    state: "Maharashtra",
                    lat: 19.0760,
                    lng: 72.8777,
                    risk_level: "HIGH",
                    population: "20M",
                    evacuation_centers: 15,
                    rescue_teams: 8,
                    last_incident: "2024-12-15T14:30:00Z"
                },
                {
                    name: "Kolkata",
                    state: "West Bengal",
                    lat: 22.5726,
                    lng: 88.3639,
                    risk_level: "MEDIUM",
                    population: "15M",
                    evacuation_centers: 12,
                    rescue_teams: 6,
                    last_incident: "2024-11-28T09:15:00Z"
                }
            ]
        };

        // Enhanced API Integration Functions
        class JalrakshaAPI {
            constructor() {
                this.baseURL = API_CONFIG.baseURL;
                this.timeout = API_CONFIG.timeout;
                this.retryAttempts = API_CONFIG.retryAttempts;
            }

            async makeRequest(endpoint, options = {}) {
                const url = `${this.baseURL}${endpoint}`;
                const config = {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    timeout: this.timeout,
                    ...options
                };

                for (let attempt = 1; attempt <= this.retryAttempts; attempt++) {
                    try {
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), this.timeout);
                        
                        const response = await fetch(url, {
                            ...config,
                            signal: controller.signal
                        });
                        
                        clearTimeout(timeoutId);

                        if (!response.ok) {
                            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                        }

                        return await response.json();
                    } catch (error) {
                        console.warn(`API attempt ${attempt} failed:`, error.message);
                        
                        if (attempt === this.retryAttempts) {
                            console.error(`All API attempts failed for ${endpoint}, using mock data`);
                            return this.getMockData(endpoint);
                        }
                        
                        // Wait before retry
                        await new Promise(resolve => setTimeout(resolve, 1000 * attempt));
                    }
                }
            }

            getMockData(endpoint) {
                const mockMap = {
                    '/alerts': MOCK_DATA.alerts,
                    '/flood/monitoring': MOCK_DATA.floodMonitoring,
                    '/flood/cities': MOCK_DATA.floodMonitoring.cities,
                    '/sos': MOCK_DATA.sosRequests,
                    '/disaster/cities': MOCK_DATA.disasterCities,
                    '/iot/sensor-data': MOCK_DATA.iotSensorData
                };
                return mockMap[endpoint] || null;
            }

            // Specific API methods
            async getAlerts(limit = 15, riskLevel = null) {
                const params = new URLSearchParams();
                if (limit) params.append('limit', limit);
                if (riskLevel) params.append('risk_level', riskLevel);
                
                const queryString = params.toString();
                const endpoint = `/alerts${queryString ? `?${queryString}` : ''}`;
                return await this.makeRequest(endpoint);
            }

            async getFloodMonitoring() {
                return await this.makeRequest('/flood/monitoring');
            }

            async getCities() {
                return await this.makeRequest('/flood/cities');
            }

            async getSOSRequests(includeAI = true) {
                const endpoint = `/sos${includeAI ? '?include_ai=true' : ''}`;
                return await this.makeRequest(endpoint);
            }

            async getDisasterCities() {
                return await this.makeRequest('/disaster/cities');
            }

            async getIoTSensorData() {
                return await this.makeRequest('/iot/sensor-data');
            }

            async predictRisk(waterLevel, rainfall, riverFlow) {
                return await this.makeRequest('/predict', {
                    method: 'POST',
                    body: JSON.stringify({
                        water_level: waterLevel,
                        rainfall: rainfall,
                        river_flow: riverFlow
                    })
                });
            }

            async submitSOSRequest(location, description, severity, contact) {
                return await this.makeRequest('/sos', {
                    method: 'POST',
                    body: JSON.stringify({
                        location,
                        description,
                        severity,
                        contact
                    })
                });
            }

            async getHealthStatus() {
                return await this.makeRequest('/health');
            }
        }

        // Initialize API instance
        const api = new JalrakshaAPI();

        // Enhanced Data Loading Functions
        async function loadDashboardData() {
            try {
                console.log('üîÑ Loading dashboard data...');
                
                const [alerts, floodMonitoring, sosRequests, disasterCities] = await Promise.all([
                    api.getAlerts(15),
                    api.getFloodMonitoring(),
                    api.getSOSRequests(true),
                    api.getDisasterCities()
                ]);

                console.log('‚úÖ Dashboard data loaded successfully');
                
                // Update UI with real data
                updateAlertsDisplay(alerts);
                updateFloodMonitoringDisplay(floodMonitoring);
                updateSOSDisplay(sosRequests);
                updateDisasterCitiesDisplay(disasterCities);
                
                return {
                    alerts,
                    floodMonitoring,
                    sosRequests,
                    disasterCities
                };
            } catch (error) {
                console.error('‚ùå Error loading dashboard data:', error);
                // Fallback to mock data
                return loadMockDashboardData();
            }
        }

        function loadMockDashboardData() {
            console.log('üîÑ Loading mock dashboard data...');
            
            updateAlertsDisplay(MOCK_DATA.alerts);
            updateFloodMonitoringDisplay(MOCK_DATA.floodMonitoring);
            updateSOSDisplay(MOCK_DATA.sosRequests);
            updateDisasterCitiesDisplay(MOCK_DATA.disasterCities);
            
            return {
                alerts: MOCK_DATA.alerts,
                floodMonitoring: MOCK_DATA.floodMonitoring,
                sosRequests: MOCK_DATA.sosRequests,
                disasterCities: MOCK_DATA.disasterCities
            };
        }

        // UI Update Functions
        function updateAlertsDisplay(alerts) {
            const alertsContainer = document.getElementById('alertsContainer');
            if (!alertsContainer || !alerts) return;

            alertsContainer.innerHTML = alerts.map(alert => `
                <div class="bg-slate-800 rounded-lg p-4 border-l-4 ${
                    alert.risk_level === 'HIGH' ? 'border-red-500' :
                    alert.risk_level === 'MEDIUM' ? 'border-yellow-500' : 'border-green-500'
                }">
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="font-semibold text-white">Alert #${alert.id}</h4>
                            <p class="text-sm text-slate-300">Risk: ${alert.risk_level}</p>
                            <p class="text-xs text-slate-400">Confidence: ${(alert.confidence * 100).toFixed(1)}%</p>
                        </div>
                        <span class="text-xs text-slate-400">${new Date(alert.timestamp).toLocaleTimeString()}</span>
                    </div>
                    <div class="mt-2 grid grid-cols-3 gap-2 text-xs">
                        <div>Water: ${alert.water_level}m</div>
                        <div>Rain: ${alert.rainfall}mm</div>
                        <div>Flow: ${alert.river_flow}m¬≥/s</div>
                    </div>
                </div>
            `).join('');
        }

        function updateFloodMonitoringDisplay(monitoringData) {
            if (!monitoringData) return;

            // Update risk counters
            const highRiskEl = document.getElementById('highRiskCount');
            const mediumRiskEl = document.getElementById('mediumRiskCount');
            const lowRiskEl = document.getElementById('lowRiskCount');
            const totalCitiesEl = document.getElementById('totalCitiesCount');

            if (highRiskEl) highRiskEl.textContent = monitoringData.high_risk_count || 0;
            if (mediumRiskEl) mediumRiskEl.textContent = monitoringData.medium_risk_count || 0;
            if (lowRiskEl) lowRiskEl.textContent = monitoringData.low_risk_count || 0;
            if (totalCitiesEl) totalCitiesEl.textContent = monitoringData.total_cities || 0;

            // Update map markers
            if (monitoringData.cities && jalrakshaMap) {
                updateMapWithCities(monitoringData.cities);
            }
        }

        function updateSOSDisplay(sosRequests) {
            const sosContainer = document.getElementById('sosContainer');
            if (!sosContainer || !sosRequests) return;

            sosContainer.innerHTML = sosRequests.map(request => `
                <div class="bg-slate-800 rounded-lg p-4 border-l-4 ${
                    request.severity === 'critical' ? 'border-red-500' :
                    request.severity === 'high' ? 'border-orange-500' : 'border-yellow-500'
                }">
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="font-semibold text-white">${request.location}</h4>
                            <p class="text-sm text-slate-300">${request.description}</p>
                            <p class="text-xs text-slate-400">Contact: ${request.contact}</p>
                        </div>
                        <div class="text-right">
                            <span class="text-xs px-2 py-1 rounded ${
                                request.status === 'active' ? 'bg-red-600' :
                                request.status === 'processing' ? 'bg-yellow-600' : 'bg-green-600'
                            }">${request.status.toUpperCase()}</span>
                            <p class="text-xs text-slate-400 mt-1">${new Date(request.timestamp).toLocaleTimeString()}</p>
                        </div>
                    </div>
                    ${request.ai_analysis ? `
                        <div class="mt-2 p-2 bg-slate-700 rounded text-xs">
                            <strong>AI Analysis:</strong> ${request.ai_analysis.priority} Priority
                            <br>Actions: ${request.ai_analysis.suggested_actions.join(', ')}
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        function updateDisasterCitiesDisplay(disasterCities) {
            // This would update any disaster cities display if needed
            console.log('Disaster cities updated:', disasterCities);
        }

        function updateMapWithCities(cities) {
            if (!jalrakshaMap || !cities) return;

            // Clear existing markers
            jalrakshaMap.eachLayer(layer => {
                if (layer instanceof L.Marker) {
                    jalrakshaMap.removeLayer(layer);
                }
            });

            // Add new markers
            cities.forEach(city => {
                const marker = L.marker([city.lat, city.lng]).addTo(jalrakshaMap);
                
                const riskColor = city.risk_level === 'HIGH' ? 'red' :
                                 city.risk_level === 'MEDIUM' ? 'orange' : 'green';
                
                marker.bindPopup(`
                    <div class="p-2">
                        <h3 class="font-bold text-lg">${city.name}</h3>
                        <p class="text-sm">${city.state}</p>
                        <p class="text-sm">Population: ${city.population}</p>
                        <p class="text-sm">Risk: <span class="text-${riskColor}-500 font-bold">${city.risk_level}</span></p>
                        <p class="text-sm">Water Level: ${city.water_level}m</p>
                        <p class="text-sm">Rainfall: ${city.rainfall}mm</p>
                        <p class="text-sm">Confidence: ${(city.confidence * 100).toFixed(1)}%</p>
                    </div>
                `);
            });
        }

        // Real-time Data Updates
        async function startRealTimeUpdates() {
            console.log('üîÑ Starting real-time data updates...');
            
            // Update data every 30 seconds
            setInterval(async () => {
                try {
                    await loadDashboardData();
                    console.log('üîÑ Real-time data updated');
                } catch (error) {
                    console.error('‚ùå Real-time update failed:', error);
                }
            }, 30000);

            // Check API health every 60 seconds
            setInterval(async () => {
                try {
                    const health = await api.getHealthStatus();
                    console.log('‚úÖ API Health check:', health);
                } catch (error) {
                    console.warn('‚ö†Ô∏è API Health check failed:', error.message);
                }
            }, 60000);
        }

        // Enhanced SOS Request Handler
        async function handleSOSRequest(location, description, severity, contact) {
            try {
                console.log('üö® Submitting SOS request...');
                const response = await api.submitSOSRequest(location, description, severity, contact);
                console.log('‚úÖ SOS request submitted:', response);
                
                // Show success message
                showNotification('SOS request submitted successfully!', 'success');
                
                // Refresh SOS data
                await loadDashboardData();
                
                return response;
            } catch (error) {
                console.error('‚ùå SOS request failed:', error);
                showNotification('Failed to submit SOS request. Please try again.', 'error');
                throw error;
            }
        }

        // Risk Prediction Handler
        async function handleRiskPrediction(waterLevel, rainfall, riverFlow) {
            try {
                console.log('ü§ñ Predicting flood risk...');
                const prediction = await api.predictRisk(waterLevel, rainfall, riverFlow);
                console.log('‚úÖ Risk prediction:', prediction);
                
                return prediction;
            } catch (error) {
                console.error('‚ùå Risk prediction failed:', error);
                // Return mock prediction as fallback
                return {
                    risk_level: waterLevel > 2.5 ? 'HIGH' : waterLevel > 1.5 ? 'MEDIUM' : 'LOW',
                    confidence: 0.75,
                    timestamp: new Date().toISOString()
                };
            }
        }

        // Notification System
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-600' :
                type === 'error' ? 'bg-red-600' :
                type === 'warning' ? 'bg-yellow-600' : 'bg-blue-600'
            } text-white`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // API Status Monitor
        function updateAPIStatus() {
            const statusElement = document.getElementById('apiStatus');
            if (!statusElement) return;

            // Check if we're using real API or mock data
            const isUsingMockData = jalrakshaData.systemStatus === 'offline' || 
                                  jalrakshaData.floodPredictions.length === 0;
            
            if (isUsingMockData) {
                statusElement.innerHTML = '<span class="text-yellow-500">‚ö†Ô∏è Using Mock Data</span>';
            } else {
                statusElement.innerHTML = '<span class="text-green-500">‚úÖ API Connected</span>';
            }
        }
        
        // Initialize all functionality when DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize charts
            initializeCharts();
            
            // Initialize navigation
            initializeNavigation();
            
            // Initialize SOS modal
            initializeSOS();
            
            // Initialize alert refresh
            initializeAlertRefresh();
            
            // Initialize JalRakshƒÅ AI data synchronization
            initializeJalrakshaSync();
            
            // Initialize custom emergency system
            initializeEmergencySystem();
            
            // Initialize JalRakshƒÅ AI interactive map
            initializeJalrakshaMap();
            
            // Start real-time updates
            startRealTimeUpdates();
            
            // Update API status
            updateAPIStatus();
            
            // Initialize new features
            initializeRouteFinder();
            initializeRiskDashboard();
            initializeCrowdsourcedReports();
            initializeRescueTracking();
        });

        // Charts initialization
        function initializeCharts() {
            // Water Level Chart
            const waterChart = echarts.init(document.getElementById('waterChart'));
            const waterOption = {
                animation: false,
                backgroundColor: 'transparent',
                textStyle: { color: '#94a3b8' },
                grid: { top: 20, right: 20, bottom: 20, left: 40 },
                xAxis: {
                    type: 'category',
                    data: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                    axisLine: { lineStyle: { color: '#475569' } },
                    axisTick: { show: false },
                    axisLabel: { color: '#94a3b8', fontSize: 10 }
                },
                yAxis: {
                    type: 'value',
                    axisLine: { show: false },
                    axisTick: { show: false },
                    axisLabel: { color: '#94a3b8', fontSize: 10 },
                    splitLine: { lineStyle: { color: '#334155' } }
                },
                series: [{
                    data: [2.1, 2.8, 3.2, 4.1, 3.9, 3.5],
                    type: 'line',
                    smooth: true,
                    symbol: 'circle',
                    symbolSize: 6,
                    lineStyle: { color: '#06b6d4', width: 3 },
                    itemStyle: { color: '#06b6d4' },
                    areaStyle: {
                        color: {
                            type: 'linear',
                            x: 0, y: 0, x2: 0, y2: 1,
                            colorStops: [
                                { offset: 0, color: 'rgba(6, 182, 212, 0.3)' },
                                { offset: 1, color: 'rgba(6, 182, 212, 0.1)' }
                            ]
                        }
                    }
                }],
                tooltip: {
                    backgroundColor: 'rgba(15, 23, 42, 0.9)',
                    borderColor: '#475569',
                    textStyle: { color: '#f1f5f9' }
                }
            };
            waterChart.setOption(waterOption);

            // Rainfall Chart
            const rainfallChart = echarts.init(document.getElementById('rainfallChart'));
            const rainfallOption = {
                animation: false,
                backgroundColor: 'transparent',
                textStyle: { color: '#94a3b8' },
                grid: { top: 20, right: 20, bottom: 20, left: 40 },
                xAxis: {
                    type: 'category',
                    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    axisLine: { lineStyle: { color: '#475569' } },
                    axisTick: { show: false },
                    axisLabel: { color: '#94a3b8', fontSize: 10 }
                },
                yAxis: {
                    type: 'value',
                    axisLine: { show: false },
                    axisTick: { show: false },
                    axisLabel: { color: '#94a3b8', fontSize: 10 },
                    splitLine: { lineStyle: { color: '#334155' } }
                },
                series: [{
                    data: [15, 32, 28, 45, 67, 23, 12],
                    type: 'bar',
                    itemStyle: {
                        color: '#fb923c',
                        borderRadius: [4, 4, 0, 0]
                    }
                }],
                tooltip: {
                    backgroundColor: 'rgba(15, 23, 42, 0.9)',
                    borderColor: '#475569',
                    textStyle: { color: '#f1f5f9' }
                }
            };
            rainfallChart.setOption(rainfallOption);

            // Historical Chart (for Analytics)
            if (document.getElementById('historicalChart')) {
                const historicalChart = echarts.init(document.getElementById('historicalChart'));
                const historicalOption = {
                    animation: false,
                    backgroundColor: 'transparent',
                    textStyle: { color: '#94a3b8' },
                    grid: { top: 60, right: 20, bottom: 20, left: 40 },
                    xAxis: {
                        type: 'category',
                        data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        axisLine: { lineStyle: { color: '#475569' } },
                        axisTick: { show: false },
                        axisLabel: { color: '#94a3b8', fontSize: 10 }
                    },
                    yAxis: [
                        {
                            type: 'value',
                            name: 'Rainfall (mm)',
                            position: 'left',
                            axisLine: { show: false },
                            axisTick: { show: false },
                            axisLabel: { color: '#94a3b8', fontSize: 10 },
                            splitLine: { lineStyle: { color: '#334155' } }
                        },
                        {
                            type: 'value',
                            name: 'Incidents',
                            position: 'right',
                            axisLine: { show: false },
                            axisTick: { show: false },
                            axisLabel: { color: '#94a3b8', fontSize: 10 },
                            splitLine: { show: false }
                        }
                    ],
                    legend: {
                        data: ['Rainfall', 'Flood Incidents'],
                        textStyle: { color: '#94a3b8' },
                        top: 10
                    },
                    series: [
                        {
                            name: 'Rainfall',
                            data: [120, 200, 150, 80, 70, 110, 130, 140, 90, 160, 180, 100],
                            type: 'bar',
                            yAxisIndex: 0,
                            itemStyle: { color: '#06b6d4' }
                        },
                        {
                            name: 'Flood Incidents',
                            data: [2, 5, 3, 1, 0, 2, 3, 4, 1, 3, 4, 2],
                            type: 'line',
                            yAxisIndex: 1,
                            smooth: true,
                            lineStyle: { color: '#f59e0b', width: 3 },
                            itemStyle: { color: '#f59e0b' }
                        }
                    ],
                    tooltip: {
                        trigger: 'axis',
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        borderColor: '#475569',
                        textStyle: { color: '#f1f5f9' }
                    }
                };
                historicalChart.setOption(historicalOption);
            }

            // Risk Chart (for Analytics)
            if (document.getElementById('riskChart')) {
                const riskChart = echarts.init(document.getElementById('riskChart'));
                const riskOption = {
                    animation: false,
                    backgroundColor: 'transparent',
                    series: [{
                        type: 'pie',
                        data: [
                            { value: 45, name: 'Safe Zones', itemStyle: { color: '#22c55e' } },
                            { value: 25, name: 'Warning Zones', itemStyle: { color: '#f59e0b' } },
                            { value: 20, name: 'High Risk', itemStyle: { color: '#f97316' } },
                            { value: 10, name: 'Critical Risk', itemStyle: { color: '#ef4444' } }
                        ],
                        radius: ['40%', '70%'],
                        center: ['50%', '50%'],
                        label: {
                            color: '#94a3b8',
                            fontSize: 12
                        }
                    }],
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        borderColor: '#475569',
                        textStyle: { color: '#f1f5f9' }
                    }
                };
                riskChart.setOption(riskOption);
            }

            // Response Chart (for Analytics)
            if (document.getElementById('responseChart')) {
                const responseChart = echarts.init(document.getElementById('responseChart'));
                const responseOption = {
                    animation: false,
                    backgroundColor: 'transparent',
                    textStyle: { color: '#94a3b8' },
                    grid: { top: 20, right: 20, bottom: 20, left: 60 },
                    xAxis: {
                        type: 'category',
                        data: ['Team A', 'Team B', 'Team C', 'Team D'],
                        axisLine: { lineStyle: { color: '#475569' } },
                        axisTick: { show: false },
                        axisLabel: { color: '#94a3b8', fontSize: 10 }
                    },
                    yAxis: {
                        type: 'value',
                        name: 'Minutes',
                        axisLine: { show: false },
                        axisTick: { show: false },
                        axisLabel: { color: '#94a3b8', fontSize: 10 },
                        splitLine: { lineStyle: { color: '#334155' } }
                    },
                    series: [{
                        data: [8, 12, 6, 10],
                        type: 'bar',
                        itemStyle: {
                            color: '#06b6d4',
                            borderRadius: [4, 4, 0, 0]
                        }
                    }],
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        borderColor: '#475569',
                        textStyle: { color: '#f1f5f9' }
                    }
                };
                responseChart.setOption(responseOption);
            }

            // Seasonal Chart (for Analytics)
            if (document.getElementById('seasonalChart')) {
                const seasonalChart = echarts.init(document.getElementById('seasonalChart'));
                const seasonalOption = {
                    animation: false,
                    backgroundColor: 'transparent',
                    textStyle: { color: '#94a3b8' },
                    grid: { top: 20, right: 20, bottom: 20, left: 40 },
                    xAxis: {
                        type: 'category',
                        data: ['Spring', 'Summer', 'Monsoon', 'Winter'],
                        axisLine: { lineStyle: { color: '#475569' } },
                        axisTick: { show: false },
                        axisLabel: { color: '#94a3b8', fontSize: 10 }
                    },
                    yAxis: {
                        type: 'value',
                        axisLine: { show: false },
                        axisTick: { show: false },
                        axisLabel: { color: '#94a3b8', fontSize: 10 },
                        splitLine: { lineStyle: { color: '#334155' } }
                    },
                    series: [{
                        data: [12, 8, 45, 5],
                        type: 'line',
                        smooth: true,
                        symbol: 'circle',
                        symbolSize: 6,
                        lineStyle: { color: '#06b6d4', width: 3 },
                        itemStyle: { color: '#06b6d4' },
                        areaStyle: {
                            color: {
                                type: 'linear',
                                x: 0, y: 0, x2: 0, y2: 1,
                                colorStops: [
                                    { offset: 0, color: 'rgba(6, 182, 212, 0.3)' },
                                    { offset: 1, color: 'rgba(6, 182, 212, 0.1)' }
                                ]
                            }
                        }
                    }],
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        borderColor: '#475569',
                        textStyle: { color: '#f1f5f9' }
                    }
                };
                seasonalChart.setOption(seasonalOption);
            }

            // Team Performance Chart (for Teams page)
            if (document.getElementById('teamPerformanceChart')) {
                const teamPerformanceChart = echarts.init(document.getElementById('teamPerformanceChart'));
                const teamPerformanceOption = {
                    animation: false,
                    backgroundColor: 'transparent',
                    textStyle: { color: '#94a3b8' },
                    grid: { top: 40, right: 20, bottom: 20, left: 60 },
                    xAxis: {
                        type: 'category',
                        data: ['RR Unit', 'Medical', 'Water Rescue', 'Supply & Logistics'],
                        axisLine: { lineStyle: { color: '#475569' } },
                        axisTick: { show: false },
                        axisLabel: { color: '#94a3b8', fontSize: 10 }
                    },
                    yAxis: {
                        type: 'value',
                        name: 'Success Rate %',
                        axisLine: { show: false },
                        axisTick: { show: false },
                        axisLabel: { color: '#94a3b8', fontSize: 10 },
                        splitLine: { lineStyle: { color: '#334155' } }
                    },
                    series: [{
                        data: [95, 92, 88, 85],
                        type: 'bar',
                        itemStyle: {
                            color: function(params) {
                                const colors = ['#22c55e', '#f59e0b', '#8b5cf6', '#fb923c'];
                                return colors[params.dataIndex];
                            },
                            borderRadius: [4, 4, 0, 0]
                        }
                    }],
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        borderColor: '#475569',
                        textStyle: { color: '#f1f5f9' }
                    }
                };
                teamPerformanceChart.setOption(teamPerformanceOption);
            }

            // Handle window resize
            window.addEventListener('resize', function() {
                waterChart.resize();
                rainfallChart.resize();
                if (document.getElementById('historicalChart')) {
                    echarts.getInstanceByDom(document.getElementById('historicalChart'))?.resize();
                }
                if (document.getElementById('riskChart')) {
                    echarts.getInstanceByDom(document.getElementById('riskChart'))?.resize();
                }
                if (document.getElementById('responseChart')) {
                    echarts.getInstanceByDom(document.getElementById('responseChart'))?.resize();
                }
                if (document.getElementById('seasonalChart')) {
                    echarts.getInstanceByDom(document.getElementById('seasonalChart'))?.resize();
                }
                if (document.getElementById('teamPerformanceChart')) {
                    echarts.getInstanceByDom(document.getElementById('teamPerformanceChart'))?.resize();
                }
            });
        }

        // Navigation functionality
        function initializeNavigation() {
            const pages = {
                dashboard: document.getElementById('dashboardPage'),
                routeFinder: document.getElementById('routeFinderPage'),
                riskDashboard: document.getElementById('riskDashboardPage'),
                telegramBot: document.getElementById('telegramBotPage'),
                crowdsourced: document.getElementById('crowdsourcedPage'),
                rescueTracking: document.getElementById('rescueTrackingPage'),
                analytics: document.getElementById('analyticsPage'),
                teams: document.getElementById('teamsPage'),
                settings: document.getElementById('settingsPage')
            };

            const navButtons = {
                dashboard: document.getElementById('dashboardBtn'),
                routeFinder: document.getElementById('routeFinderBtn'),
                riskDashboard: document.getElementById('riskDashboardBtn'),
                telegramBot: document.getElementById('telegramBotBtn'),
                crowdsourced: document.getElementById('crowdsourcedBtn'),
                rescueTracking: document.getElementById('rescueTrackingBtn'),
                analytics: document.getElementById('analyticsBtn'),
                teams: document.getElementById('teamsBtn'),
                settings: document.getElementById('settingsBtn')
            };

            function showPage(pageId) {
                Object.values(pages).forEach(page => {
                    if (page) page.classList.add('hidden');
                });
                if (pages[pageId]) {
                    pages[pageId].classList.remove('hidden');
                }
            }

            Object.entries(navButtons).forEach(([pageId, button]) => {
                if (button) {
                    button.addEventListener('click', function() {
                        // Update button styles
                        Object.values(navButtons).forEach(btn => {
                            if (btn) {
                                btn.className = 'text-slate-300 hover:text-primary transition-colors';
                            }
                        });
                        this.className = 'text-primary hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-primary after:rounded-full';
                        
                        // Show corresponding page
                        showPage(pageId);
                    });
                }
            });

            // Show dashboard by default
            showPage('dashboard');
        }

        // SOS Modal functionality
        function initializeSOS() {
            const sosButton = document.getElementById('sosButton');
            const sosModal = document.getElementById('sosModal');
            const closeSos = document.getElementById('closeSos');
            const sosForm = document.getElementById('sosForm');
            const successModal = document.getElementById('successModal');
            const closeSuccess = document.getElementById('closeSuccess');

            if (sosButton && sosModal && closeSos) {
                sosButton.addEventListener('click', function() {
                    sosModal.classList.remove('hidden');
                });

                closeSos.addEventListener('click', function() {
                    sosModal.classList.add('hidden');
                });

                sosModal.addEventListener('click', function(e) {
                    if (e.target === sosModal) {
                        sosModal.classList.add('hidden');
                    }
                });
            }

            if (sosForm) {
                sosForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Simulate form submission
                    setTimeout(function() {
                        sosModal.classList.add('hidden');
                        successModal.classList.remove('hidden');
                    }, 500);
                });
            }

            if (closeSuccess && successModal) {
                closeSuccess.addEventListener('click', function() {
                    successModal.classList.add('hidden');
                });

                successModal.addEventListener('click', function(e) {
                    if (e.target === successModal) {
                        successModal.classList.add('hidden');
                    }
                });
            }
        }

        // JalRakshƒÅ AI - Custom Data Synchronization
        async function initializeJalrakshaSync() {
            console.log('üåä JalRakshƒÅ AI - Initializing custom flood monitoring system...');
            
            // Initial data load
            await loadJalrakshaData();
            
            // Custom sync intervals for different data types
            setInterval(async () => {
                await syncFloodPredictions();
                updateFloodDashboard();
            }, 15000); // Every 15 seconds
            
            setInterval(async () => {
                await syncSensorData();
                updateSensorCharts();
            }, 8000); // Every 8 seconds
            
            setInterval(async () => {
                await syncEmergencyRequests();
                updateEmergencyPanel();
            }, 20000); // Every 20 seconds
        }

        // JalRakshƒÅ AI - Custom Data Loading
        async function loadJalrakshaData() {
            try {
                console.log('üåä Loading JalRakshƒÅ AI system data...');
                
                // Use the enhanced API integration
                const data = await loadDashboardData();
                
                // Update jalrakshaData with the loaded data
                jalrakshaData.floodPredictions = data.alerts || [];
                jalrakshaData.sensorReadings = data.floodMonitoring?.cities || [];
                jalrakshaData.emergencyRequests = data.sosRequests || [];
                jalrakshaData.disasterCities = data.disasterCities || [];
                
                console.log('‚úÖ JalRakshƒÅ AI data loaded successfully');
                console.log('   - Flood predictions:', jalrakshaData.floodPredictions.length);
                console.log('   - Sensor readings:', jalrakshaData.sensorReadings.length);
                console.log('   - Emergency requests:', jalrakshaData.emergencyRequests.length);
                console.log('   - Disaster cities:', jalrakshaData.disasterCities.length);

                // Cities data is already loaded in disasterCities
                jalrakshaData.citiesData = data.disasterCities || [];
                console.log('‚úÖ Cities data loaded:', jalrakshaData.citiesData.length);
                updateMapWithCitiesData();

                jalrakshaData.lastSync = new Date();
                jalrakshaData.systemStatus = 'online';
                console.log('üåä JalRakshƒÅ AI data synchronized successfully');

            } catch (error) {
                console.error('‚ùå JalRakshƒÅ AI sync error:', error);
                jalrakshaData.systemStatus = 'offline';
            }
        }

        // JalRakshƒÅ AI - Custom Sync Functions
        async function syncFloodPredictions() {
            try {
                const response = await fetch(`${JALRAKSHA_API}/alerts?limit=10`);
                if (response.ok) {
                    const data = await response.json();
                    jalrakshaData.floodPredictions = data.alerts || [];
                    console.log('üåä Flood predictions synced');
                }
            } catch (error) {
                console.error('‚ùå Flood prediction sync error:', error);
            }
        }

        async function syncSensorData() {
            try {
                const response = await fetch(`${JALRAKSHA_API}/flood-monitoring/cities`);
                if (response.ok) {
                    const data = await response.json();
                    jalrakshaData.sensorReadings = data.cities || [];
                    console.log('üì° Sensor data synced');
                }
            } catch (error) {
                console.error('‚ùå Sensor data sync error:', error);
            }
        }

        async function syncEmergencyRequests() {
            try {
                const response = await fetch(`${JALRAKSHA_API}/sos?include_ai=true`);
                if (response.ok) {
                    const data = await response.json();
                    jalrakshaData.emergencyRequests = data.requests || [];
                    console.log('üö® Emergency requests synced');
                }
            } catch (error) {
                console.error('‚ùå Emergency sync error:', error);
            }
        }

        // JalRakshƒÅ AI - Custom Dashboard Updates
        function updateFloodDashboard() {
            updateFloodAlerts();
            updateRiskStatistics();
            checkCriticalFloodRisk();
        }

        function updateSensorCharts() {
            updateWaterLevelChart();
            updateRainfallChart();
            updateRiskMap();
        }

        function updateEmergencyPanel() {
            updateEmergencyRequests();
            updateRescueTeamStatus();
            updateEmergencyStatistics();
        }

        // JalRakshƒÅ AI - Custom Flood Alert System
        function updateFloodAlerts() {
            const alertsContainer = document.querySelector('.space-y-3.max-h-80');
            if (!alertsContainer || !jalrakshaData.floodPredictions.length) return;

            alertsContainer.innerHTML = '';
            
            jalrakshaData.floodPredictions.slice(0, 5).forEach(prediction => {
                const alertElement = createJalrakshaAlert(prediction);
                alertsContainer.appendChild(alertElement);
            });
        }

        // JalRakshƒÅ AI - Custom Alert Creation
        function createJalrakshaAlert(prediction) {
            const div = document.createElement('div');
            const riskLevel = prediction.risk_level || 'LOW';
            const riskClass = getJalrakshaRiskClass(riskLevel);
            const icon = getJalrakshaRiskIcon(riskLevel);
            
            div.className = `${riskClass} border ${riskClass.replace('/10', '/30')} rounded-lg p-3`;
            div.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <span class="${riskClass.replace('/10', '')} text-sm font-medium">${riskLevel.toUpperCase()}</span>
                    <span class="text-xs text-slate-400">${formatJalrakshaTime(prediction.timestamp)}</span>
                </div>
                <p class="text-sm mb-2">${getJalrakshaAlertMessage(prediction)}</p>
                <div class="flex items-center justify-between">
                    <span class="text-xs text-slate-400">JalRakshƒÅ Confidence: ${Math.round((prediction.confidence || 0.85) * 100)}%</span>
                    <i class="${icon} ${riskClass.replace('/10', '')}"></i>
                </div>
            `;
            
            return div;
        }

        // JalRakshƒÅ AI - Custom Emergency Request System
        function updateEmergencyRequests() {
            const emergencyContainer = document.querySelector('.space-y-3:not(.max-h-80)');
            if (!emergencyContainer || !jalrakshaData.emergencyRequests.length) return;

            emergencyContainer.innerHTML = '';
            
            jalrakshaData.emergencyRequests.slice(0, 3).forEach(request => {
                const emergencyElement = createJalrakshaEmergency(request);
                emergencyContainer.appendChild(emergencyElement);
            });
        }

        // JalRakshƒÅ AI - Custom Emergency Element Creation
        function createJalrakshaEmergency(request) {
            const div = document.createElement('div');
            const status = request.status || 'PENDING';
            const statusColor = getJalrakshaStatusColor(status);
            
            div.className = 'bg-slate-800/50 rounded-lg p-3 border border-slate-600/30';
            div.innerHTML = `
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium">${request.emergency_type || 'Flood Emergency'}</span>
                    <span class="text-xs ${statusColor}">${status}</span>
                </div>
                <p class="text-xs text-slate-400 mb-2">Location: ${request.location || 'Unknown'}</p>
                <p class="text-xs text-slate-400">Source: ${request.platform || 'JalRakshƒÅ AI'}</p>
                <div class="mt-2 text-xs text-primary">ID: ${request.id || 'JR-' + Date.now()}</div>
            `;
            return div;
        }

        // JalRakshƒÅ AI - Custom Risk Statistics
        function updateRiskStatistics() {
            const criticalAlerts = jalrakshaData.floodPredictions.filter(pred => 
                pred.risk_level === 'HIGH' || pred.risk_level === 'CRITICAL'
            ).length;
            
            const totalEmergencies = jalrakshaData.emergencyRequests.length;
            const resolvedEmergencies = jalrakshaData.emergencyRequests.filter(req => 
                req.status === 'RESOLVED' || req.status === 'COMPLETED'
            ).length;
            
            const activeSensors = jalrakshaData.sensorReadings.length;
            
            // Update JalRakshƒÅ AI statistics cards
            const alertsCard = document.querySelector('.text-2xl.font-bold.text-red-400');
            if (alertsCard) alertsCard.textContent = criticalAlerts;
            
            const evacuatedCard = document.querySelector('.text-2xl.font-bold.text-green-400');
            if (evacuatedCard) evacuatedCard.textContent = resolvedEmergencies;
            
            const rescueCard = document.querySelector('.text-2xl.font-bold.text-blue-400');
            if (rescueCard) rescueCard.textContent = totalEmergencies;
            
            const accuracyCard = document.querySelector('.text-2xl.font-bold.text-primary');
            if (accuracyCard) accuracyCard.textContent = '94.2%';
        }

        // JalRakshƒÅ AI - Custom Critical Risk Detection
        async function checkCriticalFloodRisk() {
            const criticalRisks = jalrakshaData.floodPredictions.filter(pred => 
                pred.risk_level === 'HIGH' || pred.risk_level === 'CRITICAL'
            );
            
            if (criticalRisks.length > 0) {
                await triggerJalrakshaEmergencyAlert(criticalRisks[0]);
            }
        }

        // JalRakshƒÅ AI - Custom Emergency Alert System
        async function triggerJalrakshaEmergencyAlert(prediction) {
            try {
                const alertMessage = `üåä JALRAKSHƒÄ AI EMERGENCY ALERT üåä\n\n` +
                    `Risk Level: ${prediction.risk_level}\n` +
                    `Confidence: ${Math.round((prediction.confidence || 0.85) * 100)}%\n` +
                    `Water Level: ${prediction.water_level || 'N/A'}m\n` +
                    `Rainfall: ${prediction.rainfall || 'N/A'}mm\n` +
                    `River Flow: ${prediction.river_flow || 'N/A'}m¬≥/s\n` +
                    `Time: ${new Date(prediction.timestamp).toLocaleString()}\n\n` +
                    `üö® JalRakshƒÅ AI recommends immediate action!`;
                
                await fetch(`${EMERGENCY_BOT_API}/send-alert`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: alertMessage,
                        alert_type: prediction.risk_level,
                        system: 'JalRakshƒÅ AI'
                    })
                });
                
                console.log('üåä JalRakshƒÅ AI emergency alert sent:', prediction.risk_level);
            } catch (error) {
                console.error('‚ùå JalRakshƒÅ AI alert error:', error);
            }
        }

        // JalRakshƒÅ AI - Custom Emergency System
        function initializeEmergencySystem() {
            console.log('üåä Initializing JalRakshƒÅ AI emergency system...');
            
            // Set up emergency request handling
            const sosForm = document.getElementById('sosForm');
            if (sosForm) {
                sosForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    await handleJalrakshaEmergencySubmission();
                });
            }
        }

        // JalRakshƒÅ AI - Custom Emergency Submission Handler
        async function handleJalrakshaEmergencySubmission() {
            const emergencyData = {
                emergency_type: document.getElementById('emergencyType').value,
                location: document.getElementById('emergencyLocation').value,
                contact: document.getElementById('emergencyContact').value,
                people_count: document.getElementById('peopleCount').value,
                description: document.getElementById('emergencyDescription').value,
                timestamp: new Date().toISOString(),
                system: 'JalRakshƒÅ AI',
                priority: 'HIGH'
            };

            try {
                console.log('üåä Processing JalRakshƒÅ AI emergency request...');
                
                // Send to emergency bot
                const emergencyResponse = await fetch(`${EMERGENCY_BOT_API}/sos`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(emergencyData)
                });

                if (emergencyResponse.ok) {
                    console.log('üåä Emergency request sent via JalRakshƒÅ AI');
                    
                    // Also send to JalRakshƒÅ AI backend
                    await fetch(`${JALRAKSHA_API}/sos`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(emergencyData)
                    });
                    
                    // Show JalRakshƒÅ AI success modal
                    showJalrakshaSuccessModal();
                } else {
                    throw new Error('JalRakshƒÅ AI emergency system not responding');
                }
            } catch (error) {
                console.error('‚ùå JalRakshƒÅ AI emergency error:', error);
                alert('JalRakshƒÅ AI emergency system unavailable. Please try again.');
            }
        }

        // JalRakshƒÅ AI - Custom Success Modal
        function showJalrakshaSuccessModal() {
            const sosModal = document.getElementById('sosModal');
            const successModal = document.getElementById('successModal');
            
            if (sosModal && successModal) {
                // Update success modal with JalRakshƒÅ AI branding
                const successTitle = successModal.querySelector('h3');
                if (successTitle) {
                    successTitle.textContent = 'üåä JalRakshƒÅ AI Emergency Sent!';
                }
                
                const successMessage = successModal.querySelector('p');
                if (successMessage) {
                    successMessage.textContent = 'Your emergency request has been processed by JalRakshƒÅ AI. Rescue teams have been notified!';
                }
                
                sosModal.classList.add('hidden');
                successModal.classList.remove('hidden');
            }
        }

        // JalRakshƒÅ AI - Custom Chart Updates
        function updateWaterLevelChart() {
            if (!jalrakshaData.sensorReadings.length) return;

            const waterChart = echarts.getInstanceByDom(document.getElementById('waterChart'));
            if (waterChart) {
                const waterData = jalrakshaData.sensorReadings.slice(0, 6).map(city => 
                    city.current_water_level || Math.random() * 5 + 1
                );
                const timeLabels = jalrakshaData.sensorReadings.slice(0, 6).map((_, index) => {
                    const time = new Date();
                    time.setHours(time.getHours() - (5 - index));
                    return time.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                });

                const option = waterChart.getOption();
                option.xAxis[0].data = timeLabels;
                option.series[0].data = waterData;
                waterChart.setOption(option);
                console.log('üåä JalRakshƒÅ AI water level chart updated');
            }
        }

        function updateRainfallChart() {
            if (!jalrakshaData.sensorReadings.length) return;

            const rainfallChart = echarts.getInstanceByDom(document.getElementById('rainfallChart'));
            if (rainfallChart) {
                const rainfallData = jalrakshaData.sensorReadings.slice(0, 7).map(city => 
                    city.current_rainfall || Math.random() * 100 + 10
                );
                const dayLabels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

                const option = rainfallChart.getOption();
                option.xAxis[0].data = dayLabels;
                option.series[0].data = rainfallData;
                rainfallChart.setOption(option);
                console.log('üåä JalRakshƒÅ AI rainfall chart updated');
            }
        }

        // JalRakshƒÅ AI - Interactive Map Initialization
        function initializeJalrakshaMap() {
            console.log('üåä Initializing JalRakshƒÅ AI interactive map...');
            
            // Initialize map centered on India
            jalrakshaMap = L.map('jalrakshaMap', {
                center: [20.5937, 78.9629], // Center of India
                zoom: 6,
                zoomControl: true,
                attributionControl: false
            });

            // Add dark tile layer
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                attribution: '¬© JalRakshƒÅ AI Flood Monitoring System',
                subdomains: 'abcd',
                maxZoom: 18
            }).addTo(jalrakshaMap);

            // Add custom attribution
            jalrakshaMap.attributionControl.addAttribution('üåä JalRakshƒÅ AI Flood Monitoring');

            // Add city markers
            addCityMarkers();
            
            console.log('‚úÖ JalRakshƒÅ AI map initialized successfully');
        }

        // JalRakshƒÅ AI - Add City Markers with Risk Levels
        function addCityMarkers() {
            Object.entries(INDIAN_CITIES_DATA).forEach(([cityName, cityData]) => {
                const riskLevel = getRiskLevelFromScore(cityData.flood_risk);
                const markerColor = getMarkerColor(riskLevel);
                const markerIcon = getMarkerIcon(riskLevel);
                
                // Create custom marker
                const customIcon = L.divIcon({
                    className: 'jalraksha-marker',
                    html: `<div class="jalraksha-marker-content ${markerColor}">
                        <i class="${markerIcon}"></i>
                        <div class="jalraksha-marker-pulse"></div>
                    </div>`,
                    iconSize: [30, 30],
                    iconAnchor: [15, 15],
                    popupAnchor: [0, -15]
                });

                // Add marker to map
                const marker = L.marker([cityData.lat, cityData.lng], { icon: customIcon })
                    .addTo(jalrakshaMap);

                // Add popup with city information
                const popupContent = `
                    <div class="jalraksha-popup">
                        <div class="jalraksha-popup-header">
                            <h3 class="jalraksha-popup-title">${cityName}</h3>
                            <span class="jalraksha-popup-risk ${markerColor}">${riskLevel}</span>
                        </div>
                        <div class="jalraksha-popup-body">
                            <p><strong>State:</strong> ${cityData.state}</p>
                            <p><strong>Population:</strong> ${cityData.population}</p>
                            <p><strong>Flood Risk:</strong> ${Math.round(cityData.flood_risk * 100)}%</p>
                            <p><strong>Coordinates:</strong> ${cityData.lat.toFixed(4)}, ${cityData.lng.toFixed(4)}</p>
                        </div>
                        <div class="jalraksha-popup-footer">
                            <button class="jalraksha-popup-btn" onclick="viewCityDetails('${cityName}')">
                                View Details
                            </button>
                        </div>
                    </div>
                `;

                marker.bindPopup(popupContent, {
                    className: 'jalraksha-popup-container',
                    maxWidth: 300,
                    minWidth: 250
                });
            });
        }

        // JalRakshƒÅ AI - Helper Functions for Map
        function getRiskLevelFromScore(score) {
            if (score >= 0.8) return 'CRITICAL';
            if (score >= 0.6) return 'HIGH';
            if (score >= 0.4) return 'MEDIUM';
            return 'LOW';
        }

        function getMarkerColor(riskLevel) {
            switch (riskLevel.toLowerCase()) {
                case 'critical': return 'jalraksha-critical';
                case 'warning': return 'jalraksha-high';
                case 'safe': return 'jalraksha-low';
                default: return 'jalraksha-low';
            }
        }

        function getMarkerIcon(riskLevel) {
            switch (riskLevel.toLowerCase()) {
                case 'critical': return 'ri-error-warning-line';
                case 'warning': return 'ri-alarm-warning-line';
                case 'safe': return 'ri-map-pin-line';
                default: return 'ri-map-pin-line';
            }
        }

        // JalRakshƒÅ AI - City Details Function
        function viewCityDetails(cityName) {
            // Find city in the real-time data
            const cityData = jalrakshaData.citiesData.find(city => city.city === cityName);
            if (cityData) {
                // Center map on selected city
                jalrakshaMap.setView([cityData.lat, cityData.lng], 10);
                
                // Show city information in console (can be extended to show in UI)
                console.log(`üåä JalRakshƒÅ AI - Viewing details for ${cityName}:`, cityData);
                
                // Create detailed popup with all information
                const detailedPopup = L.popup({
                    className: 'jalraksha-detailed-popup',
                    maxWidth: 400,
                    minWidth: 350
                }).setContent(`
                    <div class="jalraksha-popup">
                        <div class="jalraksha-popup-header">
                            <h3 class="jalraksha-popup-title">${cityData.city}</h3>
                            <span class="jalraksha-popup-risk ${getMarkerColor(cityData.risk)}">${cityData.risk.toUpperCase()}</span>
                        </div>
                        <div class="jalraksha-popup-body">
                            <p><strong>Status:</strong> ${cityData.current_status}</p>
                            <p><strong>AI Confidence:</strong> ${cityData.confidence}%</p>
                            <h4 class="text-cyan-400 mt-3 mb-2">IoT Data:</h4>
                            <div class="grid grid-cols-2 gap-2 text-sm">
                                <div class="bg-slate-800 p-2 rounded">
                                    <div class="text-slate-400">Water Level</div>
                                    <div class="text-white font-semibold">${cityData.iot_data.water_level}</div>
                                </div>
                                <div class="bg-slate-800 p-2 rounded">
                                    <div class="text-slate-400">Rainfall</div>
                                    <div class="text-white font-semibold">${cityData.iot_data.rainfall}</div>
                                </div>
                                <div class="bg-slate-800 p-2 rounded">
                                    <div class="text-slate-400">River Flow</div>
                                    <div class="text-white font-semibold">${cityData.iot_data.river_flow}</div>
                                </div>
                                <div class="bg-slate-800 p-2 rounded">
                                    <div class="text-slate-400">Drainage</div>
                                    <div class="text-white font-semibold">${cityData.iot_data.drainage_capacity}</div>
                                </div>
                            </div>
                            <h4 class="text-cyan-400 mt-3 mb-2">Past Tragedies:</h4>
                            <div class="space-y-1">
                                ${cityData.past_events.slice(0, 3).map(event => 
                                    `<div class="text-xs text-slate-300 bg-slate-800 p-2 rounded">
                                        <span class="text-yellow-400">${event.year}:</span> ${event.event}
                                    </div>`
                                ).join('')}
                            </div>
                        </div>
                    </div>
                `);
                
                // Open detailed popup
                detailedPopup.setLatLng([cityData.lat, cityData.lng]).openOn(jalrakshaMap);
            }
        }


        function updateRiskMap() {
            // Update risk map with JalRakshƒÅ AI data
            if (jalrakshaMap && jalrakshaData.sensorReadings.length > 0) {
                // Update markers based on real-time data
                updateCityMarkersWithRealTimeData();
                console.log('üåä JalRakshƒÅ AI risk map updated with real-time data');
            }
        }

        // JalRakshƒÅ AI - Update Map with Cities Data
        function updateMapWithCitiesData() {
            if (!jalrakshaMap || !jalrakshaData.citiesData.length) return;
            
            // Clear existing markers
            jalrakshaMap.eachLayer((layer) => {
                if (layer instanceof L.Marker) {
                    jalrakshaMap.removeLayer(layer);
                }
            });
            
            // Add new markers with real-time data
            jalrakshaData.citiesData.forEach(city => {
                const riskLevel = city.risk;
                const markerColor = getMarkerColor(riskLevel);
                const markerIcon = getMarkerIcon(riskLevel);
                
                // Create custom marker
                const customIcon = L.divIcon({
                    className: 'jalraksha-marker',
                    html: `<div class="jalraksha-marker-content ${markerColor}">
                        <i class="${markerIcon}"></i>
                        <div class="jalraksha-marker-pulse"></div>
                    </div>`,
                    iconSize: [30, 30],
                    iconAnchor: [15, 15],
                    popupAnchor: [0, -15]
                });

                // Add marker to map
                const marker = L.marker([city.lat, city.lng], { icon: customIcon })
                    .addTo(jalrakshaMap);

                // Add popup with real-time city information
                const popupContent = `
                    <div class="jalraksha-popup">
                        <div class="jalraksha-popup-header">
                            <h3 class="jalraksha-popup-title">${city.city}</h3>
                            <span class="jalraksha-popup-risk ${markerColor}">${riskLevel.toUpperCase()}</span>
                        </div>
                        <div class="jalraksha-popup-body">
                            <p><strong>Status:</strong> ${city.current_status}</p>
                            <p><strong>AI Confidence:</strong> ${city.confidence}%</p>
                            <p><strong>Water Level:</strong> ${city.iot_data.water_level}</p>
                            <p><strong>Rainfall:</strong> ${city.iot_data.rainfall}</p>
                            <p><strong>River Flow:</strong> ${city.iot_data.river_flow}</p>
                            <p><strong>Drainage:</strong> ${city.iot_data.drainage_capacity}</p>
                        </div>
                        <div class="jalraksha-popup-footer">
                            <button class="jalraksha-popup-btn" onclick="viewCityDetails('${city.city}')">
                                View Details
                            </button>
                        </div>
                    </div>
                `;

                marker.bindPopup(popupContent, {
                    className: 'jalraksha-popup-container',
                    maxWidth: 300,
                    minWidth: 250
                });
            });
            
            console.log('üåä Map updated with real-time cities data:', jalrakshaData.citiesData.length);
        }

        // JalRakshƒÅ AI - Update Markers with Real-time Data
        function updateCityMarkersWithRealTimeData() {
            // Update map with latest cities data
            updateMapWithCitiesData();
            console.log('üåä Updating city markers with real-time sensor data...');
        }

        // JalRakshƒÅ AI - Custom Helper Functions
        function getJalrakshaRiskClass(riskLevel) {
            switch (riskLevel.toLowerCase()) {
                case 'critical': return 'bg-red-500/10 text-red-400';
                case 'high': return 'bg-yellow-500/10 text-yellow-400';
                case 'medium': return 'bg-orange-500/10 text-orange-400';
                default: return 'bg-green-500/10 text-green-400';
            }
        }

        function getJalrakshaRiskIcon(riskLevel) {
            switch (riskLevel.toLowerCase()) {
                case 'critical': return 'ri-error-warning-line';
                case 'high': return 'ri-cloudy-2-line';
                case 'medium': return 'ri-water-flash-line';
                default: return 'ri-check-line';
            }
        }

        function getJalrakshaAlertMessage(prediction) {
            const riskLevel = prediction.risk_level || 'LOW';
            if (riskLevel === 'CRITICAL') {
                return `JalRakshƒÅ AI: Critical flood risk! Immediate evacuation required.`;
            } else if (riskLevel === 'HIGH') {
                return `JalRakshƒÅ AI: High flood risk detected. Prepare for evacuation.`;
            } else if (riskLevel === 'MEDIUM') {
                return `JalRakshƒÅ AI: Moderate flood risk. Stay alert and prepared.`;
            } else {
                return `JalRakshƒÅ AI: Low flood risk. Normal conditions monitored.`;
            }
        }

        function formatJalrakshaTime(timestamp) {
            const now = new Date();
            const time = new Date(timestamp);
            const diffMs = now - time;
            const diffMins = Math.floor(diffMs / 60000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins} min ago`;
            
            const diffHours = Math.floor(diffMins / 60);
            if (diffHours < 24) return `${diffHours} hour ago`;
            
            const diffDays = Math.floor(diffHours / 24);
            return `${diffDays} day ago`;
        }

        function getJalrakshaStatusColor(status) {
            switch (status.toLowerCase()) {
                case 'resolved': return 'text-green-400';
                case 'completed': return 'text-green-400';
                case 'pending': return 'text-yellow-400';
                case 'active': return 'text-red-400';
                default: return 'text-slate-400';
            }
        }

        // JalRakshƒÅ AI - Additional Custom Functions
        function updateRescueTeamStatus() {
            // Update rescue team status with JalRakshƒÅ AI data
            console.log('üåä JalRakshƒÅ AI rescue team status updated');
        }

        function updateEmergencyStatistics() {
            // Update emergency statistics with JalRakshƒÅ AI data
            console.log('üåä JalRakshƒÅ AI emergency statistics updated');
        }

        // JalRakshƒÅ AI - System Status Check
        function checkJalrakshaSystemStatus() {
            const statusIndicator = document.querySelector('.animate-pulse');
            if (statusIndicator) {
                if (jalrakshaData.systemStatus === 'online') {
                    statusIndicator.style.color = '#10b981'; // Green
                } else {
                    statusIndicator.style.color = '#ef4444'; // Red
                }
            }
        }

        // Alert refresh animation
        function initializeAlertRefresh() {
            // Simulate real-time updates
            setInterval(function() {
                const alertIndicator = document.querySelector('.animate-pulse');
                if (alertIndicator) {
                    alertIndicator.style.opacity = '0.3';
                    setTimeout(() => {
                        alertIndicator.style.opacity = '1';
                    }, 200);
                }
            }, 30000);

            // Update timestamps in team updates
            setInterval(function() {
                const timestamps = document.querySelectorAll('.text-green-400.text-xs, .text-yellow-400.text-xs, .text-red-400.text-xs');
                timestamps.forEach((timestamp, index) => {
                    if (timestamp.textContent.includes('min ago')) {
                        const minutes = parseInt(timestamp.textContent.split(' ')[0]) + 1;
                        timestamp.textContent = minutes + ' min ago';
                    }
                });
            }, 60000);
        }

        // ===== NEW FEATURES JAVASCRIPT =====

        // Safe Route Finder Functionality
        function initializeRouteFinder() {
            const routeForm = document.getElementById('routeFinderForm');
            if (routeForm) {
                routeForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    await findSafeRoute();
                });
            }
        }

        async function findSafeRoute() {
            const fromLocation = document.getElementById('fromLocation').value;
            const toLocation = document.getElementById('toLocation').value;
            
            if (!fromLocation || !toLocation) {
                alert('Please enter both from and to locations');
                return;
            }

            try {
                // Simulate API call
                const response = await fetch(`/get_safe_route?from=${encodeURIComponent(fromLocation)}&to=${encodeURIComponent(toLocation)}`);
                
                // For demo purposes, show mock data
                const mockRouteData = {
                    route: "Via Highway 101 - Coastal Route",
                    safetyScore: 85,
                    eta: "25 minutes",
                    distance: "12.5 km",
                    steps: [
                        "Start from " + fromLocation,
                        "Take Highway 101 North",
                        "Avoid flooded areas near Riverside",
                        "Continue to " + toLocation
                    ]
                };
                
                displayRouteResults(mockRouteData);
                plotRouteOnMap(fromLocation, toLocation);
                
            } catch (error) {
                console.error('Route finding error:', error);
                // Show mock data for demo
                const mockRouteData = {
                    route: "Via Highway 101 - Coastal Route",
                    safetyScore: 85,
                    eta: "25 minutes",
                    distance: "12.5 km",
                    steps: [
                        "Start from " + fromLocation,
                        "Take Highway 101 North",
                        "Avoid flooded areas near Riverside",
                        "Continue to " + toLocation
                    ]
                };
                displayRouteResults(mockRouteData);
                plotRouteOnMap(fromLocation, toLocation);
            }
        }

        function displayRouteResults(routeData) {
            const resultsDiv = document.getElementById('routeResults');
            const detailsDiv = document.getElementById('routeDetails');
            
            if (resultsDiv && detailsDiv) {
                const safetyColor = routeData.safetyScore >= 80 ? 'green' : routeData.safetyScore >= 60 ? 'yellow' : 'red';
                const safetyText = routeData.safetyScore >= 80 ? 'Safe' : routeData.safetyScore >= 60 ? 'Moderate' : 'High Risk';
                
                detailsDiv.innerHTML = `
                    <div class="bg-slate-800/50 rounded-lg p-4 mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="font-semibold">${routeData.route}</h4>
                            <span class="px-3 py-1 rounded-full text-sm font-medium bg-${safetyColor}-500/20 text-${safetyColor}-400 border border-${safetyColor}-500/30">
                                ${safetyText}
                            </span>
                        </div>
                        <div class="grid grid-cols-3 gap-4 text-sm">
                            <div>
                                <div class="text-slate-400">Safety Score</div>
                                <div class="text-${safetyColor}-400 font-semibold">${routeData.safetyScore}%</div>
                            </div>
                            <div>
                                <div class="text-slate-400">ETA</div>
                                <div class="text-blue-400 font-semibold">${routeData.eta}</div>
                            </div>
                            <div>
                                <div class="text-slate-400">Distance</div>
                                <div class="text-purple-400 font-semibold">${routeData.distance}</div>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <h5 class="font-medium text-slate-300">Route Steps:</h5>
                        ${routeData.steps.map((step, index) => `
                            <div class="flex items-start space-x-3 text-sm">
                                <div class="w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center text-xs font-semibold text-primary">${index + 1}</div>
                                <span class="text-slate-300">${step}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                resultsDiv.classList.remove('hidden');
            }
        }

        function plotRouteOnMap(fromLocation, toLocation) {
            // Initialize route map if not already done
            if (!window.routeMap) {
                window.routeMap = L.map('routeMap', {
                    center: [20.5937, 78.9629],
                    zoom: 6,
                    zoomControl: true,
                    attributionControl: false
                });

                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '¬© JalRakshƒÅ AI Route Finder',
                    subdomains: 'abcd',
                    maxZoom: 18
                }).addTo(window.routeMap);
            }

            // Clear existing route
            window.routeMap.eachLayer((layer) => {
                if (layer instanceof L.Polyline || layer instanceof L.Marker) {
                    window.routeMap.removeLayer(layer);
                }
            });

            // Add mock route points (in real implementation, these would come from API)
            const routePoints = [
                [20.5937, 78.9629], // Start
                [21.5937, 79.9629], // Waypoint 1
                [22.5937, 80.9629], // Waypoint 2
                [23.5937, 81.9629]  // End
            ];

            // Add route line
            const routeLine = L.polyline(routePoints, {
                color: '#22c55e',
                weight: 4,
                opacity: 0.8
            }).addTo(window.routeMap);

            // Add start and end markers
            L.marker(routePoints[0], {
                icon: L.divIcon({
                    className: 'route-marker',
                    html: '<div class="w-6 h-6 bg-green-500 rounded-full border-2 border-white flex items-center justify-center"><i class="ri-play-fill text-white text-xs"></i></div>',
                    iconSize: [24, 24],
                    iconAnchor: [12, 12]
                })
            }).addTo(window.routeMap).bindPopup('Start: ' + fromLocation);

            L.marker(routePoints[routePoints.length - 1], {
                icon: L.divIcon({
                    className: 'route-marker',
                    html: '<div class="w-6 h-6 bg-red-500 rounded-full border-2 border-white flex items-center justify-center"><i class="ri-stop-fill text-white text-xs"></i></div>',
                    iconSize: [24, 24],
                    iconAnchor: [12, 12]
                })
            }).addTo(window.routeMap).bindPopup('End: ' + toLocation);

            // Fit map to route
            window.routeMap.fitBounds(routeLine.getBounds());
        }

        // Live Risk Dashboard Functionality
        function initializeRiskDashboard() {
            // Start live data updates
            updateLiveRiskData();
            setInterval(updateLiveRiskData, 10000); // Update every 10 seconds
        }

        async function updateLiveRiskData() {
            try {
                // Simulate API call to get live data
                const response = await fetch('/get_live_data');
                
                // For demo purposes, generate mock data
                const mockData = MOCK_DATA.floodMonitoring.cities[0] || {
                    water_level: (Math.random() * 5 + 1).toFixed(1),
                    rainfall: (Math.random() * 100 + 10).toFixed(0),
                    river_flow: (Math.random() * 10 + 2).toFixed(1),
                    risk_level: 'MEDIUM',
                    confidence: Math.random() * 0.5 + 0.5
                };
                
                updateRiskCards(mockData);
                updateRiskMap(mockData);
                
            } catch (error) {
                console.error('Live data update error:', error);
                // Use mock data for demo
                const mockData = MOCK_DATA.floodMonitoring.cities[0] || {
                    water_level: (Math.random() * 5 + 1).toFixed(1),
                    rainfall: (Math.random() * 100 + 10).toFixed(0),
                    river_flow: (Math.random() * 10 + 2).toFixed(1),
                    risk_level: 'MEDIUM',
                    confidence: Math.random() * 0.5 + 0.5
                };
                updateRiskCards(mockData);
                updateRiskMap(mockData);
            }
        }

        function updateRiskCards(data) {
            // Update water level card
            const waterLevelValue = parseFloat(data.waterLevel);
            const waterLevelCard = document.getElementById('waterLevelCard');
            const waterLevelValueEl = document.getElementById('waterLevelValue');
            
            if (waterLevelValueEl) {
                waterLevelValueEl.textContent = data.waterLevel;
            }
            
            if (waterLevelCard) {
                const status = waterLevelValue < 3 ? 'Safe' : waterLevelValue < 5 ? 'Moderate' : 'High';
                const color = waterLevelValue < 3 ? 'green' : waterLevelValue < 5 ? 'yellow' : 'red';
                
                waterLevelCard.className = waterLevelCard.className.replace(/border-\w+-\d+\/30/g, `border-${color}-500/30`);
                waterLevelCard.querySelector('.text-green-400, .text-yellow-400, .text-red-400').className = `text-${color}-400`;
                waterLevelCard.querySelector('.bg-green-400, .bg-yellow-400, .bg-red-400').className = `bg-${color}-400`;
                waterLevelCard.querySelector('.bg-green-500\/20, .bg-yellow-500\/20, .bg-red-500\/20').className = `bg-${color}-500/20`;
                waterLevelCard.querySelector('.text-green-400, .text-yellow-400, .text-red-400').textContent = status;
                
                const progressBar = waterLevelCard.querySelector('.bg-green-400, .bg-yellow-400, .bg-red-400');
                progressBar.style.width = `${Math.min(waterLevelValue * 20, 100)}%`;
            }

            // Update rainfall card
            const rainfallValue = parseFloat(data.rainfall);
            const rainfallCard = document.getElementById('rainfallCard');
            const rainfallValueEl = document.getElementById('rainfallValue');
            
            if (rainfallValueEl) {
                rainfallValueEl.textContent = data.rainfall;
            }

            // Update river flow card
            const riverFlowValue = parseFloat(data.riverFlow);
            const riverFlowCard = document.getElementById('riverFlowCard');
            const riverFlowValueEl = document.getElementById('riverFlowValue');
            
            if (riverFlowValueEl) {
                riverFlowValueEl.textContent = data.riverFlow;
            }

            // Update overall risk
            const overallRiskEl = document.getElementById('overallRisk');
            const lastUpdateEl = document.getElementById('lastUpdate');
            
            if (overallRiskEl) {
                const riskLevel = data.overallRisk < 30 ? 'LOW' : data.overallRisk < 70 ? 'MODERATE' : 'HIGH';
                const riskColor = data.overallRisk < 30 ? 'green' : data.overallRisk < 70 ? 'yellow' : 'red';
                overallRiskEl.textContent = riskLevel;
                overallRiskEl.className = `text-4xl font-bold text-${riskColor}-400 mb-2`;
            }
            
            if (lastUpdateEl) {
                lastUpdateEl.textContent = 'Just now';
            }
        }

        function updateRiskMap(data) {
            // Initialize risk map if not already done
            if (!window.riskMap) {
                window.riskMap = L.map('riskMap', {
                    center: [20.5937, 78.9629],
                    zoom: 6,
                    zoomControl: true,
                    attributionControl: false
                });

                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '¬© JalRakshƒÅ AI Risk Dashboard',
                    subdomains: 'abcd',
                    maxZoom: 18
                }).addTo(window.riskMap);
            }

            // Clear existing markers
            window.riskMap.eachLayer((layer) => {
                if (layer instanceof L.Marker) {
                    window.riskMap.removeLayer(layer);
                }
            });

            // Add risk markers based on data
            const riskLocations = [
                { lat: 20.5937, lng: 78.9629, risk: 'high', name: 'Mumbai' },
                { lat: 22.5726, lng: 88.3639, risk: 'moderate', name: 'Kolkata' },
                { lat: 13.0827, lng: 80.2707, risk: 'high', name: 'Chennai' },
                { lat: 12.9716, lng: 77.5946, risk: 'low', name: 'Bangalore' }
            ];

            riskLocations.forEach(location => {
                const color = location.risk === 'high' ? 'red' : location.risk === 'moderate' ? 'yellow' : 'green';
                const marker = L.marker([location.lat, location.lng], {
                    icon: L.divIcon({
                        className: 'risk-marker',
                        html: `<div class="w-4 h-4 bg-${color}-500 rounded-full border border-white animate-pulse"></div>`,
                        iconSize: [16, 16],
                        iconAnchor: [8, 8]
                    })
                }).addTo(window.riskMap);
                
                marker.bindPopup(`${location.name}<br>Risk: ${location.risk.toUpperCase()}`);
            });
        }

        // Crowdsourced Reports Functionality
        function initializeCrowdsourcedReports() {
            const reportForm = document.getElementById('reportForm');
            if (reportForm) {
                reportForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    await submitReport();
                });
            }
            
            // Initialize reports map
            initializeReportsMap();
        }

        async function submitReport() {
            const location = document.getElementById('reportLocation').value;
            const description = document.getElementById('reportDescription').value;
            const severity = document.getElementById('reportSeverity').value;
            const contact = document.getElementById('reportContact').value;
            
            if (!location || !description) {
                alert('Please fill in location and description');
                return;
            }

            try {
                const reportData = {
                    location: location,
                    description: description,
                    severity: severity,
                    contact: contact,
                    timestamp: new Date().toISOString()
                };

                // Simulate API call
                const response = await fetch('/report_issue', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(reportData)
                });

                // Add to recent reports list
                addReportToList(reportData);
                
                // Add marker to map
                addReportMarker(reportData);
                
                // Clear form
                document.getElementById('reportForm').reset();
                
                alert('Report submitted successfully!');
                
            } catch (error) {
                console.error('Report submission error:', error);
                alert('Failed to submit report. Please try again.');
            }
        }

        function addReportToList(reportData) {
            const recentReportsDiv = document.getElementById('recentReports');
            if (recentReportsDiv) {
                const severityColors = {
                    'low': 'green',
                    'medium': 'orange',
                    'high': 'yellow',
                    'critical': 'red'
                };
                
                const color = severityColors[reportData.severity] || 'orange';
                const severityText = reportData.severity.toUpperCase();
                
                const reportElement = document.createElement('div');
                reportElement.className = `bg-${color}-500/10 border border-${color}-500/30 rounded-lg p-3`;
                reportElement.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-${color}-400 text-xs font-medium">‚ö†Ô∏è ${severityText}</span>
                        <span class="text-xs text-slate-400">Just now</span>
                    </div>
                    <p class="text-sm font-medium mb-1">${reportData.location}</p>
                    <p class="text-xs text-slate-400">${reportData.description}</p>
                `;
                
                recentReportsDiv.insertBefore(reportElement, recentReportsDiv.firstChild);
                
                // Keep only latest 5 reports
                while (recentReportsDiv.children.length > 5) {
                    recentReportsDiv.removeChild(recentReportsDiv.lastChild);
                }
            }
        }

        function initializeReportsMap() {
            if (!window.reportsMap) {
                window.reportsMap = L.map('reportsMap', {
                    center: [20.5937, 78.9629],
                    zoom: 6,
                    zoomControl: true,
                    attributionControl: false
                });

                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '¬© JalRakshƒÅ AI Reports',
                    subdomains: 'abcd',
                    maxZoom: 18
                }).addTo(window.reportsMap);
            }
        }

        function addReportMarker(reportData) {
            if (window.reportsMap) {
                // Generate random coordinates for demo (in real app, use geocoding)
                const lat = 20.5937 + (Math.random() - 0.5) * 10;
                const lng = 78.9629 + (Math.random() - 0.5) * 10;
                
                const severityColors = {
                    'low': 'green',
                    'medium': 'orange',
                    'high': 'yellow',
                    'critical': 'red'
                };
                
                const color = severityColors[reportData.severity] || 'orange';
                
                const marker = L.marker([lat, lng], {
                    icon: L.divIcon({
                        className: 'report-marker',
                        html: `<div class="w-6 h-6 bg-${color}-500 rounded-full border-2 border-white flex items-center justify-center text-white text-xs font-bold">‚ö†</div>`,
                        iconSize: [24, 24],
                        iconAnchor: [12, 12]
                    })
                }).addTo(window.reportsMap);
                
                marker.bindPopup(`
                    <div class="text-sm">
                        <strong>${reportData.location}</strong><br>
                        ${reportData.description}<br>
                        <span class="text-xs text-slate-500">Severity: ${reportData.severity.toUpperCase()}</span>
                    </div>
                `);
            }
        }

        // Rescue Team Tracking Functionality
        function initializeRescueTracking() {
            // Initialize rescue map
            initializeRescueMap();
            
            // Start team status updates
            updateTeamStatus();
            setInterval(updateTeamStatus, 15000); // Update every 15 seconds
        }

        function initializeRescueMap() {
            if (!window.rescueMap) {
                window.rescueMap = L.map('rescueMap', {
                    center: [20.5937, 78.9629],
                    zoom: 6,
                    zoomControl: true,
                    attributionControl: false
                });

                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '¬© JalRakshƒÅ AI Rescue Teams',
                    subdomains: 'abcd',
                    maxZoom: 18
                }).addTo(window.rescueMap);
            }
            
            // Add initial team markers
            addTeamMarkers();
        }

        function addTeamMarkers() {
            if (window.rescueMap) {
                const teams = [
                    { id: 'alpha-1', name: 'Team Alpha-1', lat: 20.5937, lng: 78.9629, status: 'available', color: 'green' },
                    { id: 'beta-2', name: 'Team Beta-2', lat: 22.5726, lng: 88.3639, status: 'standby', color: 'yellow' },
                    { id: 'gamma-3', name: 'Team Gamma-3', lat: 13.0827, lng: 80.2707, status: 'available', color: 'blue' }
                ];
                
                teams.forEach(team => {
                    const marker = L.marker([team.lat, team.lng], {
                        icon: L.divIcon({
                            className: 'rescue-marker',
                            html: `<div class="w-8 h-8 bg-${team.color}-500 rounded-full border-2 border-white flex items-center justify-center text-white text-sm">üöë</div>`,
                            iconSize: [32, 32],
                            iconAnchor: [16, 16]
                        })
                    }).addTo(window.rescueMap);
                    
                    marker.bindPopup(`
                        <div class="text-sm">
                            <strong>${team.name}</strong><br>
                            Status: ${team.status.toUpperCase()}<br>
                            <span class="text-xs text-slate-500">Click to dispatch</span>
                        </div>
                    `);
                    
                    marker.on('click', function() {
                        dispatchTeam(team.id);
                    });
                });
            }
        }

        async function updateTeamStatus() {
            try {
                // Simulate API call to get team status
                const response = await fetch('/get_rescue_status');
                
                // For demo purposes, simulate status changes
                const teamStatuses = [
                    { id: 'alpha-1', status: 'on-mission', eta: '8 min', location: 'Sector 15, Building A-203' },
                    { id: 'beta-2', status: 'standby', eta: null, location: 'Sector 22, Zone B' },
                    { id: 'gamma-3', status: 'available', eta: null, location: 'Marina Base' }
                ];
                
                updateTeamStatusDisplay(teamStatuses);
                
            } catch (error) {
                console.error('Team status update error:', error);
            }
        }

        function updateTeamStatusDisplay(teamStatuses) {
            const teamStatusUpdatesDiv = document.getElementById('teamStatusUpdates');
            if (teamStatusUpdatesDiv) {
                teamStatusUpdatesDiv.innerHTML = '';
                
                teamStatuses.forEach(team => {
                    const statusColor = team.status === 'on-mission' ? 'green' : team.status === 'standby' ? 'yellow' : 'blue';
                    const statusText = team.status === 'on-mission' ? 'En Route' : team.status === 'standby' ? 'Ready' : 'Available';
                    
                    const teamElement = document.createElement('div');
                    teamElement.className = `bg-${statusColor}-500/10 border border-${statusColor}-500/30 rounded-lg p-4`;
                    teamElement.innerHTML = `
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-${statusColor}-400 text-sm font-medium">üöë Team ${team.id.split('-')[0].toUpperCase()}-${team.id.split('-')[1]}</span>
                            <span class="text-xs text-slate-400">2 min ago</span>
                        </div>
                        <p class="text-sm mb-2">${team.status === 'on-mission' ? 'Dispatched to ' + team.location : 'Standby at ' + team.location}</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-slate-400">${team.eta ? 'ETA: ' + team.eta : 'Status: ' + statusText}</span>
                            <span class="text-xs text-${statusColor}-400">${statusText}</span>
                        </div>
                    `;
                    
                    teamStatusUpdatesDiv.appendChild(teamElement);
                });
            }
        }

        function dispatchTeam(teamId) {
            // Simulate team dispatch
            const teamName = `Team ${teamId.split('-')[0].toUpperCase()}-${teamId.split('-')[1]}`;
            alert(`${teamName} has been dispatched! ETA: 8 minutes`);
            
            // Update team status
            updateTeamStatus();
        }

        // Add some interactive elements
        document.addEventListener('DOMContentLoaded', function() {
            // Make alert cards clickable
            const alertCards = document.querySelectorAll('[class*="bg-red-500/10"], [class*="bg-yellow-500/10"], [class*="bg-orange-500/10"]');
            alertCards.forEach(card => {
                card.style.cursor = 'pointer';
                card.addEventListener('click', function() {
                    // Add a subtle flash effect
                    this.style.transform = 'scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                });
            });

            // Add hover effects to team cards
            const teamCards = document.querySelectorAll('.bg-slate-800\\/50');
            teamCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.borderColor = '#06b6d4';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.borderColor = '';
                });
            });
        });
    </script>
    
</body>
</html>
